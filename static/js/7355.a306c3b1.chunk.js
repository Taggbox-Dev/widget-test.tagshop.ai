"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[7355],{8494:(t,e,a)=>{a.d(e,{bs:()=>r});var l=a(78250),o=a(23499),i=a(92908),s=a(95553),d=a(89652);let n=[];const r=t=>{t.persist();const e=t.target,{network:a,itemId:l,themeId:o}=e.dataset;if(1!=a||[3,4,16,47,50,55,60].includes(o))n.includes(t)||n.push(t);else{const t=document.querySelector(`.tb_media-${l}`);t&&(t.style.display="none")}1===n.length&&c()},c=async()=>{var t;const{postData:e,wall:a}=o.A.getState().appData;if(!a||!Object.keys(a).length||!n.length)return;const{User:r,Wall:u}=a,p=null===r||void 0===r?void 0:r.id,h=(i.HY,null===u||void 0===u?void 0:u.id),g=null===(t=n[0])||void 0===t?void 0:t.target,{filterId:v,network:_,itemId:b,load:w}=g.dataset,f=document.querySelector(`img[data-item-id="${b}"]`),y=null!==e&&void 0!==e&&e.completeDataObject?Object.values(e.completeDataObject).filter((t=>t.id===b)):[];if(null!==y&&void 0!==y&&y.length){var k;const t=await(async t=>["taggbox.com","tagbox.com","tagembed.com","socialwalls.com"].some((e=>t.includes(e)))||await fetch(t).then((t=>t.ok)).catch((()=>!1)))(null===(k=y[0])||void 0===k?void 0:k.postFileNew);if(!t&&f){if([2,18,3,28].includes(+_)&&"0"===w&&"34"!==v&&!g.src.includes("cloud.taggbox.com")){const t=((t,e,a)=>{var l,o,i,s,d;const{UserPlan:n,Wall:r}=e;return{table_name:null===n||void 0===n?void 0:n.db_table,...t,...null!==a&&void 0!==a&&a.length?{feedId:null===(l=a[0])||void 0===l?void 0:l.feedId,type:null===(o=a[0])||void 0===o?void 0:o.type,link:null===(i=a[0])||void 0===i?void 0:i.link,postFile:null===(s=a[0])||void 0===s?void 0:s.postFile,mediaFile:null===(d=a[0])||void 0===d?void 0:d.mediaFile}:{},url:null===r||void 0===r?void 0:r.url}})({wallId:h,postId:b,ownerId:p},a,y);try{const{data:e}=await(new d.A).post(i.t5,t,{headers:s.ML}),a=i.HY||i.MH?"":`https://images.${i.QR}/`;g.src="18"===_?`${a}${e.media}`:e.media}catch{g.src=l.gX}finally{m(g)}}else g.src=l.gX,m(g);n.shift(),c()}else{const t=`${l.th}/media/images/no-image.svg`;g.src=t,g.srcset=t,m(g),n.shift()}}},m=t=>t.setAttribute("data-load","1")},47355:(t,e,a)=>{a.r(e),a.d(e,{default:()=>n});var l=a(65043),o=a(80714),i=a(78250),s=a(8494),d=a(70579);class n extends l.PureComponent{constructor(t){super(t),this.state={mediaLoaded:!1}}UNSAFE_componentWillReceiveProps(t){const{Post:e}=t,{media:a}=e;this.props.Post!==e&&this.setState({imgSize:{small:a.image.small,large:a.image.large,orignal:a.image.orignal}})}render(){const{Post:t,opacity:e,mediaSize:a,Products:l,Item:n,ThemeInfo:r}=this.props,{mediaLoaded:c}=this.state,m=n||t.media,u=!!(l&&l.length>0&&t.hotspot),p={opacity:e,filter:c?"blur(2px)":null,aspectRatio:`${a.width}/${a.height}`};return(0,d.jsxs)("div",{className:"tb_post_modal_img_holder",children:[u?(0,d.jsx)(o.A,{products:l,dataItem:t}):null,(0,d.jsx)("img",{className:"tb_post_modal_img_",decoding:"async",src:m.image.small,srcSet:`${m.image.large}, 991w ${m.image.small}, 480w`,sizes:a&&a.width,alt:m.title,"data-link":t.link,"data-network":t.networkId,"data-wall-id":r.wallId,"data-owner-id":r.ownerId,"data-item-id":t.id,"data-feed-id":r.feedId?r.feedId:"","data-load":"0",onLoad:this.handleImageLoad,onError:t=>{t.target.src=`${i.th}/media/error/no-image.svg`,t.target.srcset=`${i.th}/media/error/no-image.svg`,(0,s.bs)(t)},loading:"lazy",draggable:"false",width:a&&a.width,height:a&&a.height,style:p})]})}}},80714:(t,e,a)=>{a.d(e,{A:()=>p});var l=a(65043),o=a(83003),i=a(97950),s=a(39532),d=a(65281),n=a(26165),r=a(70579);const c=(0,l.memo)((t=>{let{item:e}=t;const a=e.discount>0&&e.discount!==e.price,l=e.discount>0?e.discount:e.price;return(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,r.jsx)("div",{className:"tb_p_tooltip_title",children:e.title}),a&&(0,r.jsxs)("div",{className:"tb_p_tooltip_price tb_price_disabled",children:[e.currency,e.price]}),(e.price>0||e.discount>0)&&(0,r.jsxs)("div",{className:"tb_p_tooltip_price",children:[e.currency,l]})]})})),m=t=>{let{products:e,appData:a,Post:o}=t;const[m,u]=(0,l.useState)(null),p=(0,l.useMemo)((()=>{var t,e;return(null===a||void 0===a||null===(t=a.wall)||void 0===t||null===(e=t.ProductSetting)||void 0===e?void 0:e.Hotspot)||{}}),[a]),h=(0,l.useCallback)((t=>{null!==a&&void 0!==a&&a.wall&&(0,n.hq)({})}),[a,o]),g=(0,l.useCallback)(((t,e)=>{t.stopPropagation(),h(e),window.open(e.url,"_blank")}),[h]);return null!==p&&void 0!==p&&p.status?e.map(((t,e)=>{const a=`hotspot-${t.id}-${(0,d.Ul)()}`,l=m===e;return(0,r.jsxs)("div",{id:a,className:"tb_hotspot_dot"+(l?" tb_hotspot_active_":""),role:"button",style:{top:t.hotspot.top,left:t.hotspot.left},onMouseEnter:()=>u(e),onMouseLeave:()=>u(null),onClick:e=>g(e,t),"data-tooltip-offset":7,children:[(0,r.jsx)("div",{className:"tb_hotspot__ "+(0===p.type?"tb_hotspot_ani__":""),children:e+1}),(0,i.createPortal)((0,r.jsx)(s.m_,{className:"tb_pro_tooltip",anchorSelect:`#${a}`,clickable:!0,children:(0,r.jsx)(c,{item:t})}),document.body)]},`${t.id}-${e}`)})):null},u=(0,l.memo)(m),p=(0,o.Ng)((t=>({appData:t.appData})))(u)}}]);
//# sourceMappingURL=7355.a306c3b1.chunk.js.map