(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[3677],{8494:(e,t,i)=>{"use strict";i.d(t,{bs:()=>r});var o=i(78250),a=i(23499),s=i(92908),n=i(95553),l=i(89652);let d=[];const r=e=>{e.persist();const t=e.target,{network:i,itemId:o,themeId:a}=t.dataset;if(1!=i||[3,4,16,47,50,55,60].includes(a))d.includes(e)||d.push(e);else{const e=document.querySelector(`.tb_media-${o}`);e&&(e.style.display="none")}1===d.length&&c()},c=async()=>{var e;const{postData:t,wall:i}=a.A.getState().appData;if(!i||!Object.keys(i).length||!d.length)return;const{User:r,Wall:u}=i,h=null===r||void 0===r?void 0:r.id,m=(s.HY,null===u||void 0===u?void 0:u.id),v=null===(e=d[0])||void 0===e?void 0:e.target,{filterId:g,network:w,itemId:_,load:x}=v.dataset,y=document.querySelector(`img[data-item-id="${_}"]`),b=null!==t&&void 0!==t&&t.completeDataObject?Object.values(t.completeDataObject).filter((e=>e.id===_)):[];if(null!==b&&void 0!==b&&b.length){var P;const e=await(async e=>["taggbox.com","tagbox.com","tagembed.com","socialwalls.com"].some((t=>e.includes(t)))||await fetch(e).then((e=>e.ok)).catch((()=>!1)))(null===(P=b[0])||void 0===P?void 0:P.postFileNew);if(!e&&y){if([2,18,3,28].includes(+w)&&"0"===x&&"34"!==g&&!v.src.includes("cloud.taggbox.com")){const e=((e,t,i)=>{var o,a,s,n,l;const{UserPlan:d,Wall:r}=t;return{table_name:null===d||void 0===d?void 0:d.db_table,...e,...null!==i&&void 0!==i&&i.length?{feedId:null===(o=i[0])||void 0===o?void 0:o.feedId,type:null===(a=i[0])||void 0===a?void 0:a.type,link:null===(s=i[0])||void 0===s?void 0:s.link,postFile:null===(n=i[0])||void 0===n?void 0:n.postFile,mediaFile:null===(l=i[0])||void 0===l?void 0:l.mediaFile}:{},url:null===r||void 0===r?void 0:r.url}})({wallId:m,postId:_,ownerId:h},i,b);try{const{data:t}=await(new l.A).post(s.t5,e,{headers:n.ML}),i=s.HY||s.MH?"":`https://images.${s.QR}/`;v.src="18"===w?`${i}${t.media}`:t.media}catch{v.src=o.gX}finally{p(v)}}else v.src=o.gX,p(v);d.shift(),c()}else{const e=`${o.th}/media/images/no-image.svg`;v.src=e,v.srcset=e,p(v),d.shift()}}},p=e=>e.setAttribute("data-load","1")},71638:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var o=i(65043),a=i(83003),s=i(92908),n=i(34036),l=i(65146),d=i(41373),r=i(26165),c=i(70579);const p=e=>{let{product:t,wall:i,onsetProductImg:a,openAddtocart:s,item:n,setOnProductDetails:l}=e;const{ThemeInfo:p,ProductSetting:u}=i,[h,m]=(0,o.useState)(!1),[v,g]=(0,o.useState)(!1),w=(e,t)=>(0,r.hq)({type:1,action:2,wall:p.webId,product_id:t.id,post:n.referenceId,owner:p.ownerId,feed:n.feedId,currency:t.currencyCode,price:t.discount>0?t.discount:t.price}),_=u.Button,x=e=>{const{Button:t}=u;var i=e;2==parseInt(t.newTab)?window.parent.location.href=i:window.open(i,"_blank")};return(0,c.jsxs)("div",{className:"tb_rpp_pro "+(h?"ts_reelTheme_No_Product":""),children:[h?null:(0,c.jsx)("div",{className:"tb_rpp_pro_img",children:(0,c.jsx)("img",{src:t.image,alt:"",onError:()=>m(!0)})}),(0,c.jsxs)("div",{className:"tb_rpp_pro_cont",children:[(0,c.jsx)("div",{className:"tb_rpp_pro_title",children:t.title}),t.price>0||t.discount>0?(0,c.jsxs)("div",{className:"tb_rpp_p_wrap",children:[(0,c.jsxs)("div",{className:"tb_rpp_p",children:[t.currency,t.discount>0?t.discount:t.price]}),0==t.discount||t.price==t.discount?(0,c.jsx)(c.Fragment,{}):(0,c.jsxs)("div",{className:"tb_rpp_p tb_rpp_d_p",children:[t.currency,t.price]})]}):null,(0,c.jsxs)("div",{className:"tb_rpp_btn"+(v?" tb_rpp_btn_spinner":""),disabled:v,onClick:()=>{(async()=>{g(!0);const e={};if(t&&t.url)try{var i;if(140717==p.ownerId||1==(null===u||void 0===u||null===(i=u.Button)||void 0===i?void 0:i.pdp_target))x(t.url),a(t.image),g(!1),w(0,t);else{const i="magento"==t.createdFrom||!1;""!=t.createdFrom?(0,d.YS)(t.url,i,{productId:t.sku,storeId:t.storeId}).then((o=>{var n;if(i&&0==o.status)e[t.id]={data:{available:!0},showCart:140717!==p.ownerId};else{var l;const a=i&&(null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.data)||(null===o||void 0===o?void 0:o.data),s=i?{available:!0}:{};e[t.id]={data:null!==a&&void 0!==a&&a.id?{...a,...s}:null,showCart:(null===a||void 0===a?void 0:a.id)&&140717!==p.ownerId}}a(null!==o&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&n.featured_image?o.data.featured_image:t.image),g(!1),s(e,t.id,t)})).catch((e=>{console.log("error",e),x(t.url),a(t.image),g(!1),w(0,t)})):(x(t.url),a(t.image),g(!1),w(0,t))}}catch(o){console.log("error",o),x(t.url),g(!1)}})()},children:[_.text," "]})]})]},t.id)},u=(0,o.memo)(p);var h=i(36671),m=i(1043),v=i.n(m),g=i(65281);class w extends o.PureComponent{constructor(e){super(e),this.setVideoLoaded=e=>{this.setState({videoLoaded:e})},this.onUpdateTime=e=>{try{s.HY&&this.setState({played:this.state.played+e.playedSeconds})}catch(t){console.log(t)}},this.state={loadError:!1,paddingBottom:100,videoLoaded:!1,played:0}}componentWillUnmount(){const{played:e}=this.state;s.HY&&(0,g.HI)(e)}render(){var e,t,i;const{VideoClass:o,Post:a,controls:s,handleVideoEnded:n,muted:l,currentView:d,inView:r}=this.props,{videoLoaded:p}=this.state,{media:u,height:h,width:m,id:g,link:w,networkId:_}=a,x={paddingBottom:"100vh"};return(0,c.jsxs)("div",{className:`${o}_wrap_`,style:x,children:[(0,c.jsx)(v(),{className:`${o} tb_media-${g}`,url:r?u.video.full:null===u||void 0===u||null===(e=u.image)||void 0===e?void 0:e.small,"data-height":h,"data-width":m,"data-type":"video","data-network":_,"data-link":w,"data-item-id":g,"data-load":0,config:{facebook:{appId:"117029975354072",attributes:{"data-width":m,"data-height":h,poster:null===u||void 0===u||null===(t=u.image)||void 0===t?void 0:t.small}},file:{attributes:{preload:"auto",poster:null===u||void 0===u||null===(i=u.image)||void 0===i?void 0:i.small,playsInline:!0}}},autoPlay:d?1:0,loop:!0,muted:d&&l,volume:d&&l?0:1,playsinline:!0,playing:d,height:"100%",width:"100%",controls:s,onReady:()=>this.setVideoLoaded(!0),onProgress:this.onUpdateTime,onEnded:n||null},`${g}-${d}-${w}`),p?null:(0,c.jsx)("div",{className:"tb_rpp_v_spinner",children:(0,c.jsx)("div",{})})]})}}var _=i(4765);const x=JSON.parse(window.localStorage.getItem("mediaDimension"));class y extends o.PureComponent{constructor(e){super(e),this.mediaSize=e=>this.props.mediaSizeCallback(e),this.state={mediaSize:{height:null!=x?x[0]:"85vh",width:null!=x?x[1]:"85vh"}}}render(){const{Post:e,wallID:t,size:i,onUpdateProdImgIdx:o,inView:a}=this.props;return(0,c.jsx)("div",{className:"tb_rp_media_holder",children:(0,c.jsx)(_.eB,{options:{direction:"ltr",pagination:!0,arrows:!1,speed:400,rewind:!0,perPage:1,perMove:1,gap:0,updateOnMove:!0,wheel:!1,paginationDirection:"ltr",classes:{pagination:"splide__pagination tb_rp_bullet"}},onMoved:(e,t)=>o(t),children:e.mediaList.map(((o,n)=>(0,c.jsx)(_.Nn,{children:[2,4].includes(o.type)?(0,c.jsx)(h.A,{ImageClass:"tb_rp_image",Post:e,mediaOnly:o,size:i,multiPic:1,multiKey:n,hotspot:!!o.product.length&&s.HY,inView:!0}):[3,5].includes(o.type)?(0,c.jsx)(w,{VideoClass:"tb_rp_video",media:o.video.full,mediaPoster:o.image.original,Post:{...e,media:{video:o.video,image:o.image}},wallID:t,size:i,isCover:!0,controls:!1,autoPlay:!0,muted:false,index:n,inView:a}):null},n)))})},e.id)}}const b=e=>{var t;const{Post:i,muted:o,index:a,wallID:n,inView:l,currentView:d}=e,r=!1;return i.mediaList&&i.mediaList.length>0?(0,c.jsx)(y,{Post:i,...e}):[2,4].includes(i.type)&&l?(0,c.jsx)(h.A,{ImageClass:"tb_rp_image",Post:i,size:r,hotspot:!(null===i||void 0===i||null===(t=i.product)||void 0===t||!t.length)&&s.HY,blurBG:!1,observer:!1,index:a,inView:l}):[3,5].includes(i.type)&&l?(0,c.jsx)(w,{VideoClass:"tb_rp_video",Post:i,size:r,wallID:n,isCover:!0,controls:!1,currentView:d,muted:o,handleVideoEnded:()=>{},index:a,inView:l}):null},P=(0,o.memo)(b);var I=i(78250);function f(e){e.style.setProperty("visibility","visible","important"),e.style.setProperty("opacity","1","important"),e.style.setProperty("display","flex","important"),e.style.setProperty("transform","none","important"),e.style.setProperty("clip-path","initial","important"),e.style.setProperty("border","none","important")}class D extends o.PureComponent{render(){return(0,c.jsx)("a",{href:I.om,target:"_blank",ref:e=>{e&&(e.style.setProperty("margin-right","15px","important"),e.style.setProperty("width","90px","important"),e.style.setProperty("height","auto","important"),f(e))},children:(0,c.jsx)("img",{ref:e=>{e&&(e.style.setProperty("width","100%","important"),e.style.setProperty("height","auto","important"),f(e))},src:`${I.th}/media/logo/tagshop-branding.svg`})})}}const S=e=>{var t,i,a,s;let{wall:n,item:l,onsetProductImg:d,openAddtocart:r,index:p,currentView:h,muteToggle:m,muted:v,inView:g}=e;const w=!![3,5].includes(l.type),{ThemeInfo:_,ProductSetting:x}=n,[y,b]=(0,o.useState)(0),I=e=>(0,c.jsx)("div",{className:"tb_rpp_slide_wrap",children:e.products&&e.products.map(((e,t)=>(0,c.jsx)(u,{product:e,openAddtocart:r,onsetProductImg:d,wall:n,item:l},t)))});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(P,{Post:l,wallID:_.wallId,onUpdateProdImgIdx:e=>{b(e)},ownerId:_.ownerId,ThemeID:_.id,wall:n,muted:v,currentView:h,index:p,inView:g}),(0,c.jsxs)("div",{className:"tb_rp_content",children:[x&&l.isProduct?(0,c.jsx)(I,{products:null!==(t=l.mediaList)&&void 0!==t&&t.length?null!==(i=l.mediaList)&&void 0!==i&&null!==(a=i[y])&&void 0!==a&&null!==(s=a.product)&&void 0!==s&&s.length?l.mediaList[y].product:[]:l.products}):null,w?(0,c.jsx)("div",{className:"tb_rp_mute_btn",onClick:m,children:(0,c.jsx)("div",{className:"tb__icon tb-"+(v?"mute":"unmute"),children:(0,c.jsx)("div",{})})}):null,_.branding?(0,c.jsx)(D,{wallId:_.wallId,themeID:_.id}):null]})]})},C=(0,o.memo)(S);var j=i(22030);class k extends o.Component{constructor(e){var t;super(e),this.setMuted=()=>this.setState({muted:!this.state.muted}),this.onMediaUpdate=()=>this.setState({isAuthorImagevalid:!1}),this.onAddToCart=(e,t,i,o)=>{const{wall:a}=this.props,{webId:n,wallId:l,ownerId:d}=a.ThemeInfo;setTimeout((()=>{this.setState({addCartSetTime:!0})}),100);const r={type:1,action:2,wall:s.HY?n:l,feed:o.feedId,post:o.referenceId?o.referenceId:o.id,owner:d,product_id:i.id,currency:i.currency,currencyCode:i.currencyCode,price:i.discount>0?i.discount:i.price};this.setState({allProductDetails:e,addtoCartPopup:!0,selectedProductDetails:e[t],tagshopProductDeatil:{...i,trackingData:r}})},this.requestData=()=>{const{wall:e,appendData:t,hasMoreData:i,loaderData:o}=this.props,{webId:a,wallId:n}=e.ThemeInfo,l=e.ThemeStyle.totalPosts,d=Math.floor(Date.now()/1e3);i&&!o.isShowMoreLoading&&this.props.nextData(s.HY?a:n,d,l,t.networkID,t.after,t.heightEvent)},this.onItemChange=e=>this.setState({item:e}),this.startSplideSlide=e=>{this.setState({activeSlide:e.index})},this.currentSplideSlide=e=>{this.onPopUpTrack(e.index),this.setState({activeSlide:e.index}),this.props.hasMoreData&&e.index==this.props.completeData.length-2&&this.requestData()},this.onPopUpTrack=e=>{try{const{wall:t,completeData:i}=this.props,{ThemeInfo:o}=t;let a=i[e]?i[e]:null;if(a){const e={feed:a.feedId,post:a.referenceId?a.referenceId:a.id},t={action:2,wall:o.webId,feed:a.feedId,post:a.referenceId?a.referenceId:a.id,type:3,owner:o.ownerId};(0,r.hq)(s.Qy?t:{action:2,wall:o.webId,...e,owner:o.ownerId,type:3})}}catch(t){console.log("Error in PopUp Tracking",t)}},this.onClickClosePopUp=e=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null,addCartSetTime:!1}),this.onClickCheckOut=e=>this.setState({addtoCartPopup:!0,continueShopping:!1}),this.sliderRef=o.createRef(),this.state={currentIndex:null===(t=this.props)||void 0===t?void 0:t.currentIndex,item:this.props.item,windowWidth:window.innerWidth,isAuthorImagevalid:!0,isHotspot:!1,addtoCartPopup:!1,allProductDetails:null,selectedProductId:null,selectedProductDetails:null,continueShopping:!1,selectedVariant:null,showAddToCart:!1,productLoading:!0,productImg:"",tagshopProductDeatil:null,muted:!!(0,j.RP)(),activeSlide:0,addCartSetTime:!1,selectedProdDetails:null,tagProdDetail:null},this.splideRef=o.createRef()}componentDidMount(){const{currentIndex:e,item:t}=this.props,i=(0,g.hz)(t.author.picture);this.setState({currentIndex:e,item:t,isAuthorImagevalid:i})}UNSAFE_componentWillReceiveProps(e){const{currentIndex:t,item:i}=e,o=(0,g.hz)(i.author.picture);this.setState({currentIndex:t,item:i,isAuthorImagevalid:o})}render(){const{onClosePopUp:e,slideWithArrowKeys:t,wall:i,completeData:o}=this.props,{currentIndex:a,item:s,addtoCartPopup:d,selectedProductDetails:r,continueShopping:p,productImg:u,tagshopProductDeatil:h,addCartSetTime:m,muted:v,activeSlide:g}=this.state;return(0,c.jsxs)("div",{className:`modalId${s.id} tb_rp_modal ${m?"tb_rp_add_cart_m":""}`,onKeyDown:t,onKeyPress:t,onLoad:t,onClick:t=>t.currentTarget==t.target&&e(t),children:[(0,c.jsxs)("div",{className:"tb_rp_dialog",children:[d||p?null:(0,c.jsx)("div",{className:"tb_reel_close_btn",onClick:e,children:(0,c.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,c.jsx)("div",{})})}),(0,c.jsx)("div",{className:"tb_time_line_wrap",children:(0,c.jsx)("div",{className:"tb_time_line",children:(0,c.jsx)("div",{})})}),(0,c.jsx)(_.eB,{ref:this.splideRef,options:{direction:"ttb",height:window.innerHeight,start:a,wheel:!1,releaseWheel:!0,sensitivity:1,drag:!0,pagination:!1,arrows:!1,isNavigation:!1,updateOnMove:!0},onMoved:this.currentSplideSlide,onMounted:this.startSplideSlide,children:o&&o.length>0?o.map(((t,o)=>(0,c.jsx)(_.Nn,{children:(0,c.jsx)(C,{currentView:g===o,onClosePopUp:e,wall:i,item:t,openAddtocart:(e,i,o)=>this.onAddToCart(e,i,o,t),onsetProductImg:e=>this.setState({productImg:e}),muteToggle:this.setMuted,muted:v,inView:Math.abs(g-o)<=2},`${t.id}-${o}`)},`${t.id}-${o}`))):null})]}),d&&r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"tb_rp_cart_overlay",children:(0,c.jsx)("div",{})}),(0,c.jsx)("div",{className:"tb_rp_cart_modal",children:(0,c.jsxs)("div",{className:"tb_rp_cart_body",children:[(0,c.jsx)("div",{className:"ts_reel_close_btn tb_reel_close_btn",onClick:d&&!p?this.onClickClosePopUp:p?e=>this.setState({addtoCartPopup:!0,continueShopping:!1}):null,children:(0,c.jsx)("div",{className:"tb__icon tb-close-thin",children:(0,c.jsx)("div",{})})}),(0,c.jsx)("div",{className:"tb_rp_cart_wrap",children:r&&Object.keys(r).length>0?"magento"==(null===h||void 0===h?void 0:h.createdFrom)?(0,c.jsx)(n.A,{productImg:u,addtoCartPopup:d,productDetails:r,tagshopProductDeatil:h,closeCart:e=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:e=>this.setState({selectedVariant:e}),wall:i,closePopUp:this.props.onClosePopUp}):(0,c.jsx)(l.A,{productImg:u,addtoCartPopup:d,productDetails:r,tagshopProductDeatil:h,closeCart:e=>this.setState({addtoCartPopup:!1,continueShopping:!1,selectedProductDetails:null}),onAddToCart:()=>this.setState({continueShopping:!0}),onSelectedVariant:e=>this.setState({selectedVariant:e}),wall:i,closePopUp:this.props.onClosePopUp}):null})]})})]}):null]})}}const N=(0,a.Ng)((e=>{const{appData:t}=e;return{loaderData:e.loaderData,appendData:t.postData.appendData,hasMoreData:!t.postData.hasMoreData[0]||0!=t.postData.hasMoreData[0].hasMoreData&&(!t.postData.hasMoreData[t.postData.appendData.networkID]||t.postData.hasMoreData[t.postData.appendData.networkID].hasMoreData)}}),(e=>({nextData:(t,i,o,a,s,n,l)=>e((0,r.wF)(t,i,o,a,s,n,l))})))((0,o.memo)(k));var T=i(38571);class $ extends o.PureComponent{constructor(){super(...arguments),this.state={isEnable:0,eventData:{},shareText:"SHARE",viewOnText:"View on",currentIndex:null,completeData:{},personalization:{},url:null,imgData:[]},this.closeCommercePopUP=e=>{this.setState({isEnable:0,currentIndex:null},(()=>this.props.closePopUP()));var t=document.getElementsByTagName("html");t&&t[0]&&(t[0].style.overflow="")},this.getCommercePopUPEvent=e=>{null!==e&&void 0!==e&&e.card&&this.setState({url:"",isEnable:1,eventData:e,currentIndex:e.index,completeData:e.idArray,viewOnText:e.viewOnText,shareText:e.shareText,windowParent:e,imgData:e.imgData,personalization:e.personalization},(()=>this.CommercePopUPSlideWithArrowKey()))},this.featuredPopSliderChangeIndex=e=>this.updateCurrentInde(e),this.SliderWithKey=e=>this.updateCurrentInde(e),this.updateCurrentInde=e=>{const{eventData:t}=this.state;-1===e?this.setState({currentIndex:t.idArray.length-1}):this.setState({currentIndex:t.idArray.length===e?0:e})},this.CommercePopUPSlideWithArrowKey=e=>{const{personalization:t}=this.state;if(t&&1===t.popupSlideShow){let t=this;(e=e||window.event)&&e.keyCode&&void 0!==e.keyCode&&(37===e.keyCode?t.SliderWithKey(t.state.currentIndex-1):39===e.keyCode?t.SliderWithKey(t.state.currentIndex+1):27===e.keyCode&&this.closeCommercePopUP())}}}componentDidMount(){const{data:e}=this.props;this.getCommercePopUPEvent(e);var t=document.getElementsByTagName("html");t&&t[0]&&(t[0].style.overflow="hidden")}componentDidUpdate(e){this.props.data!==e.data&&this.getCommercePopUPEvent(this.props.data)}UNSAFE_componentWillReceiveProps(e){const{postData:t}=e;let{completeData:i,eventData:o}=this.state;if(i.length!=t.postData.length){let e=t.postData.map((e=>t.completeDataObject[e])).filter((e=>!String(e.id).includes("free_add_")));o.idArray=e,this.setState({completeData:e,eventData:o},(()=>{const{currentIndex:e}=this.state;this.setState({currentIndex:e+1})}))}}render(){const{viewOnText:e,isEnable:t,currentIndex:i,personalization:o,completeData:a,eventData:s,url:n,imgData:l}=this.state,{postData:d,wall:r,webFilters:p}=this.props;let u=null;return u=-1===i?a[s.idArray.length-1]:a[i],1===t&&r&&Object(a||{}).length>0?(0,c.jsx)(N,{webFilters:p,wall:r,item:u,completeData:a,onClosePopUp:this.closeCommercePopUP,currentIndex:i,personalization:o,viewOnText:e,slideWithArrowKeys:this.CommercePopUPSlideWithArrowKey,featuredPopSliderChangeIndex:this.featuredPopSliderChangeIndex,hostUrl:n,imgData:l}):null}}const A=(0,a.Ng)((e=>({wall:e.appData.wall,webFilters:e.appData.webFilters})),(e=>({closePopUP:t=>e((0,T.ng)(t))})))($)},80714:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var o=i(65043),a=i(83003),s=i(39532),n=i(26165),l=i(57515),d=i(70579);const r=(0,o.memo)((e=>{let{item:t}=e;const i=t.discount>0&&t.discount!==t.price,o=t.discount>0?t.discount:t.price;return(0,d.jsxs)("a",{hotspot:1,href:t.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,d.jsx)("div",{hotspot:1,className:"tb_p_tooltip_title",children:t.title}),i&&(0,d.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price tb_price_disabled",children:[t.currency,t.price]}),(t.price>0||t.discount>0)&&(0,d.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price",children:[t.currency,o]})]})})),c=e=>{let{products:t,appData:i,Post:a,showTooltip:c,isPopup:p,dataItem:u}=e;const[h,m]=(0,o.useState)(null),v=(0,o.useMemo)((()=>{var e,t;return(null===i||void 0===i||null===(e=i.wall)||void 0===e||null===(t=e.ProductSetting)||void 0===t?void 0:t.Hotspot)||{}}),[i]);(0,o.useEffect)((()=>{if(c){const e=t.findIndex((e=>e.id===c));-1!==e&&m(e)}else m(null)}),[c,t]);const g=(0,o.useCallback)((e=>{var t,o,a,s;null!==i&&void 0!==i&&i.wall&&(0,n.hq)({type:1,action:2,wall:null===i||void 0===i||null===(t=i.wall)||void 0===t||null===(o=t.ThemeInfo)||void 0===o?void 0:o.webId,product_id:e.id,post:u.referenceId,owner:null===i||void 0===i||null===(a=i.wall)||void 0===a||null===(s=a.ThemeInfo)||void 0===s?void 0:s.ownerId,feed:u.feedId,currency:e.currencyCode,price:Number(e.discount)>0?e.discount:e.price})}),[i,a]),w=(0,o.useCallback)(((e,t)=>{e.stopPropagation(),g(t),window.open(t.url,"_blank")}),[g]);return null!==v&&void 0!==v&&v.status?t.map(((e,t)=>{const i=`hotspot-${e.id}-${t}${p?"-pop":""}`,o=h===t;return(0,d.jsxs)("div",{id:i,className:"tb_hotspot_dot"+(o?" tb_hotspot_active_":""),role:"button",style:{top:e.hotspot.top,left:e.hotspot.left},onMouseEnter:()=>m(t),onMouseLeave:()=>m(null),onClick:t=>{w(t,e)},"data-tooltip-offset":7,children:[(0,d.jsx)("div",{hotspot:1,className:"tb_hotspot__ "+(0===v.type?"tb_hotspot_ani__":""),children:t+1}),(0,d.jsx)(l.A,{wallId:i,children:(0,d.jsx)(s.m_,{appendTo:"body","data-tooltip-id":`tooltip-${e.id}-${t}${p?"-pop":""}`,className:"tb_pro_tooltip",anchorSelect:`#${i}`,clickable:!0,...p?{isOpen:o}:{},children:(0,d.jsx)(r,{item:e})},t)})]},`${e.id}-${t}`)})):null},p=(0,o.memo)(c),u=(0,a.Ng)((e=>({appData:e.appData})))(p)},36671:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var o=i(65043),a=i(65281),s=i(78250),n=i(8494),l=i(80714),d=i(70579);class r extends o.PureComponent{constructor(e){var t,i;super(e),this.updateMediaDimensions=()=>{if(this.mediaRef.current){const{offsetHeight:e,offsetWidth:t}=this.mediaRef.current;this.setState({currentHeight:e,currentWidth:t})}},this.mediaSizeCalc=async()=>{const{Post:e,mediaOnly:t}=this.props,i=t||e.media;if((null===i||void 0===i||!i.height)&&(null===i||void 0===i||!i.width))try{var o;const{width:e,height:t}=await(0,a.TW)(null===i||void 0===i||null===(o=i.image)||void 0===o?void 0:o.small);this._isMounted&&this.setState({height:t,width:e})}catch(s){this._isMounted&&this.setState({height:300,width:300})}};const{mediaOnly:s,Post:n}=e;this.state={height:(null===s||void 0===s?void 0:s.height)||(null===n||void 0===n||null===(t=n.media)||void 0===t?void 0:t.height)||0,width:(null===s||void 0===s?void 0:s.width)||(null===n||void 0===n||null===(i=n.media)||void 0===i?void 0:i.width)||0,currentHeight:0,currentWidth:0},this.mediaRef=o.createRef()}componentDidMount(){this._isMounted=!0,requestAnimationFrame((()=>{this.updateMediaDimensions(),this.mediaSizeCalc()}))}componentWillUnmount(){this._isMounted=!1}render(){var e,t,i,o;const{height:a,width:r}=this.state,{ImageClass:c,Post:p,hotspot:u,size:h,blurBG:m,mediaOnly:v,inView:g,multiKey:w,index:_}=this.props,{id:x,link:y,products:b}=p,P=v||(null===p||void 0===p?void 0:p.media),{currentWidth:I,currentHeight:f}=this.state,D=h||100*a/r,S={paddingBottom:1===D?null:`${D}%`},C={backgroundImage:g?`url(${null===P||void 0===P||null===(e=P.image)||void 0===e?void 0:e.small})`:null},j=r>a?"100%":r/a*100+"%",k=r>a?a/r*100+"%":"100%",N=p.isProduct&&u&&p.hotspot,T={width:N&&h?j:null,height:N&&h?k:null};return(0,d.jsxs)("div",{className:`${c}_wrap_ mediaHolder${null===p||void 0===p?void 0:p.id}`,style:S,ref:this.mediaRef,children:[N&&m?(0,d.jsx)("div",{className:"tb_blur_bg_",style:C}):null,(0,d.jsxs)("div",{className:`${c}_wrap_in`,style:T,children:[N?(0,d.jsx)(l.A,{products:this.props.multiPic?p.mediaList[w].product:b,hotspot:p.hotspot,Post:p,showTooltip:null},_):null,g?(0,d.jsx)("img",{className:`${c} tb_media-${x}`,src:null===P||void 0===P||null===(t=P.image)||void 0===t?void 0:t.small,srcSet:`${null===P||void 0===P||null===(i=P.image)||void 0===i?void 0:i.small} 1x, ${null===P||void 0===P||null===(o=P.image)||void 0===o?void 0:o.large} 2x`,sizes:`${I}px`,loading:g?"eager":"lazy",decoding:"async",fetchPriority:g?"high":"low","data-id":x,height:f,width:I,"data-height":a,"data-width":r,"data-link":y,onLoad:this.onLoad,onError:e=>{e.target.src=`${s.th}/media/error/no-image.svg`,e.target.srcset=`${s.th}/media/error/no-image.svg`,(0,n.bs)(e)},alt:null===P||void 0===P?void 0:P.title,title:null===P||void 0===P?void 0:P.title},`${x}-${a}-${r}-${g}`):null]})]})}}},41497:(e,t,i)=>{"use strict";var o=i(13218);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,i,a,s,n){if(n!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return i.PropTypes=i,i}},65173:(e,t,i)=>{e.exports=i(41497)()},13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);
//# sourceMappingURL=3677.46462e30.chunk.js.map