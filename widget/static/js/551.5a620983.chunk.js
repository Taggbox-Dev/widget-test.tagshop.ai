"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[551],{90551:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(65043),l=a(83003),s=a(78250),o=a(22030),i=a(92908),r=a(65281),d=a(38571),h=a(26165),c=a(70579);const p=n.lazy((()=>a.e(5762).then(a.bind(a,75762)))),u=n.lazy((()=>a.e(6535).then(a.bind(a,56535)))),m=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(303),a.e(3834),a.e(41)]).then(a.bind(a,99187)))),g=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(303),a.e(3834),a.e(7049)]).then(a.bind(a,4835)))),f=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(6569)]).then(a.bind(a,59373)))),b=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(5658)]).then(a.bind(a,67156)))),w=n.lazy((()=>Promise.all([a.e(9532),a.e(229),a.e(303),a.e(3220)]).then(a.bind(a,23220)))),x=n.lazy((()=>Promise.all([a.e(4765),a.e(3021)]).then(a.bind(a,33021)))),S=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(9262)]).then(a.bind(a,40880)))),v=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(4975),a.e(50),a.e(7338),a.e(2873)]).then(a.bind(a,83973)))),y=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(4975),a.e(50),a.e(7338),a.e(757)]).then(a.bind(a,69993)))),j=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(4765),a.e(2668)]).then(a.bind(a,52142)))),P=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(4765),a.e(6137)]).then(a.bind(a,21693)))),T=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(4765),a.e(8467)]).then(a.bind(a,10799)))),I=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(303),a.e(2503),a.e(841),a.e(3082)]).then(a.bind(a,76877)))),k=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(303),a.e(2503),a.e(841),a.e(1608)]).then(a.bind(a,96487)))),D=n.lazy((()=>Promise.all([a.e(303),a.e(8065)]).then(a.bind(a,78065)))),M=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(303),a.e(2503),a.e(841),a.e(7745)]).then(a.bind(a,85008)))),F=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(303),a.e(2503),a.e(841),a.e(8583)]).then(a.bind(a,50394)))),z=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(303),a.e(2503),a.e(841),a.e(8482)]).then(a.bind(a,78437)))),U=n.lazy((()=>a.e(4491).then(a.bind(a,54491)))),_=n.lazy((()=>Promise.all([a.e(9532),a.e(1043),a.e(229),a.e(4765),a.e(3813)]).then(a.bind(a,87121)))),C=n.lazy((()=>Promise.all([a.e(9532),a.e(229),a.e(9875)]).then(a.bind(a,99875)))),H=n.lazy((()=>Promise.all([a.e(9532),a.e(229),a.e(303),a.e(4975),a.e(50),a.e(7040)]).then(a.bind(a,67040)))),$=i.HY?s.hX:s.Fp,E=i.HY?s.Fc:s.xX,L=n.memo((e=>{let{loadBranding:t,renderId:a,handlePressStart:l,handlePressEnd:s,loadMoredata:o,wall:r,tuchMobile:d,reviewFilters:h,webFilters:p,postData:u,clickToShowPopUp:$,onClickToCTA:E,postSizeInPx:L,onClickPopUpSlider:B,parentID:Y,keyRender:A,containerSize:N,heightUpdate:R}=e;const W=!u.hasMoreData[0]||0!=u.hasMoreData[0].hasMoreData&&(!u.hasMoreData[u.appendData.networkID]||u.hasMoreData[u.appendData.networkID].hasMoreData),{CardStyle:q,ThemeStyle:O,ProductSetting:X,ThemeInfo:G,SnapUp:J}=r,V={...u,loadBranding:t,handlePressStart:l,handlePressEnd:s,heightUpdate:R,loadMoredata:o,reviewFilters:h,webFilters:p,hasMoreData:W,clickToShowPopUp:$,onClickToCTA:E,onClickPopUpSlider:B,keyRender:A,containerSize:N,heightUpdate:R,postSizeInPx:L,parentID:Y,renderId:a,CardStyle:q,ThemeStyle:O,ProductSetting:X,ThemeInfo:G,SnapUp:J};switch(null===G||void 0===G?void 0:G.id){case 3:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(g,{...V})});case 4:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(f,{...V})," "]});case 19:case 59:case 83:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(m,{...V})," "]});case 50:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:i.HY?(0,c.jsx)(x,{...V}):(0,c.jsx)(w,{...V})});case 16:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(P,{...V})});case 55:case 81:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(j,{...V})});case 49:case 53:case 85:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",i.HY?(0,c.jsx)(S,{...V}):(0,c.jsx)(b,{...V})]});case 47:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(T,{tuchMobile:d,...V})});case 6:case 61:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(v,{...V})});case 62:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",i.HY?(0,c.jsx)(y,{...V}):i.aD?(0,c.jsx)(I,{...V}):""," "]});case 63:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(k,{...V})});case 64:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(D,{...V})});case 65:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(M,{...V})});case 78:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(F,{...V})});case 66:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(z,{...V})});case 67:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(U,{...V})});case 77:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(_,{...V})});case 63:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(H,{...V})});case 64:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(C,{...V})});default:return(0,c.jsx)(c.Fragment,{})}}));class B extends n.PureComponent{constructor(e){super(e),this.loadBranding=()=>this.setState({isBranding:!0}),this.handleTouchStart=e=>this.setState({tuchMobile:!0}),this.autoLoadEditorScrollData=e=>{const{wall:t,postData:a,loaderData:n}=this.props,l=t.ThemeStyle.totalPosts;let s=document.getElementsByClassName("wall-editor");if(1==t.ThemeStyle.autoScrollStatus&&$.includes(null===t||void 0===t?void 0:t.ThemeInfo.id)&&s.length>0){let e=s[0];if(document.body.scrollHeight+e.scrollTop>=e.scrollHeight-10&&(!n||!n.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(i.HY?t.ThemeInfo.webId:t.ThemeInfo.wallId,e,l,a.appendData.networkID,a.appendData.after,a.appendData.heightEvent)}}},this.autoLoadScrollData=e=>{const{wall:t,postData:a,loaderData:n}=this.props,l=t.ThemeStyle.totalPosts,s=document.body,o=document.documentElement;if(1===t.ThemeStyle.autoScrollStatus&&$.includes(null===t||void 0===t?void 0:t.ThemeInfo.id)){const e=Math.max(s.scrollHeight,s.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight);if(window.innerHeight+window.pageYOffset>=parseInt(e)-parseInt(50)&&(!n||!n.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(i.HY?t.ThemeInfo.webId:t.ThemeInfo.wallId,e,l,a.appendData.networkID,a.appendData.after,a.appendData.heightEvent)}}},this.onClickToShowPopup=(e,t)=>a=>{a.stopPropagation(),this.onLoadPopUp(e,t)},this.onClickPopUpSlider=(e,t)=>this.onLoadPopUp(e,t),this.onLoadPopUp=(e,t)=>{var a,n,l,s,d;const{wall:c,postData:p}=this.props,{viewOn:u,share:m}=c.ThemeStyle.language.text,g="tagembed"==(null===c||void 0===c||null===(a=c.User)||void 0===a?void 0:a.userDatabaseType),f=null===(n=c.ThemeInfo)||void 0===n?void 0:n.ownerId,b=i.HY?null===(l=c.ThemeInfo)||void 0===l?void 0:l.webId:null===(s=c.ThemeInfo)||void 0===s?void 0:s.wallId,w=null===(d=c.ThemeStyle)||void 0===d?void 0:d.modal;if(g||i.HY||!((0,o.qs)()&&(null===w||void 0===w||!w.mobile)||g&&null!==w&&void 0!==w&&w.mobile&&""!==t.link)){let a=p.postData.map((e=>p.completeDataObject[e])).filter((e=>!String(e.id).includes("free_add_"))),n=(0,r.p5)(a,t.id,e);if(2===(null===w||void 0===w?void 0:w.action)){if("undefined"==t.link||""==t.link)return!1;window.open(t.link,"_blank")}else 3===(null===w||void 0===w?void 0:w.action)?window.open(w.redirect,"_blank"):1===(null===w||void 0===w?void 0:w.action)&&this.props.showPopUP({type:"post",card:t,idArray:a,index:n,viewOnText:u,shareText:m,imgData:o.Y0,wall:c})}else{if("undefined"==t.link)return!1;window.open(t.link,"_blank")}const x={feed:t.feedId,post:t.referenceId?t.referenceId:t.id},S={action:2,wall:b,feed:t.feedId,post:t.referenceId?t.referenceId:t.id,type:3,owner:f};(0,h.hq)(i.Qy?S:{action:2,wall:b,...x,owner:f,type:3}),(0,h.x9)("Tagbox","popupclick_","popup",t.link)},this.loadPopUpWithTimer=()=>{const{currentIndex:e}=this.state,{postData:{postData:t,completeDataObject:a},wall:{ThemeRule:{timeForPopup:n}}}=this.props,l=0===n?5e3:1e3*n;let s=e+1;if(s>=t.length&&(s=0),!isNaN(s)&&t.length>0){const e=t.map((e=>a[e]));this.setState({currentIndex:s}),this.togglePopUpVisibility(s,e[s],l)}},this.togglePopUpVisibility=(e,t,a)=>{this.onLoadPopUp(e,t),setTimeout((()=>{this.props.closePopUP(),setTimeout((()=>{this.loadPopUpWithTimer()}),a)}),a)},this.onClickToCTA=e=>{const{wall:t}=this.props;(0,h.hq)({action:2,wall:t.ThemeInfo.wallId,type:1,feed:e.feedId,post:e.referenceId?e.referenceId:e.id,owner:t.ThemeInfo.ownerId}),(0,h.x9)("Tagbox","ctaClick","cta",e.cta&&e.cta.url?e.cta.url:"")},this.handlePressStart=e=>{const t=e.target.getAttribute("hotspot"),a=e.touches?e.touches[0]:e;!t&&this.setState({startPos:{x:a.clientX,y:a.clientY}})},this.handlePressStart=e=>{const t=e.target.getAttribute("hotspot"),a=e.touches?e.touches[0]:e;!t&&this.setState({startPos:{x:a.clientX,y:a.clientY}})},this.handlePressEnd=(e,t,a)=>{if(!e.target.getAttribute("hotspot")){const n=e.changedTouches?e.changedTouches[0]:e,l={x:n.clientX,y:n.clientY},{startPos:s}=this.state,o=Math.abs(l.x-s.x),i=Math.abs(l.y-s.y),r=5;o<r&&i<r&&this.onClickToShowPopup(t,a)(e)}},this.autoScroll=()=>{const e=this.scrollRef.current;e&&(e.scrollTop<e.scrollHeight-e.clientHeight?e.scrollTop+=.5:e.scrollTop=0)},this.state={isLoaded:!1,currentIndex:-1,tuchMobile:!1,startPos:{x:0,y:0},isBranding:!1},this.scrollRef=n.createRef()}componentDidMount(){var e;if(!i.aD&&!i.yR&&!o.GF){const{wall:{ThemeRule:{timeForPopup:e},wall:t}}=this.props,a=0===e?5e3:1e3*e;1==t.ThemeStyle.modal.action&&setTimeout((()=>this.loadPopUpWithTimer()),a)}window.editor?null===(e=document.querySelector(".wall-editor"))||void 0===e||e.addEventListener("scroll",this.autoLoadEditorScrollData):window.addEventListener&&window.addEventListener("scroll",this.autoLoadScrollData),setTimeout((()=>{this.setState({isLoaded:!0})}),2e3),i.HY&&!i.I2&&(0,r.pj)()}componentDidUpdate(e,t){(0,o.qs)()&&t.tuchMobile!==this.state.tuchMobile&&this.props.loadMoredata()}render(){var e,t,a;const{wall:l,postData:s,containerSize:o,brandingNetworks:r}=this.props,{isLoaded:d,height:h,isBranding:m}=this.state,g=null===s||void 0===s||null===(e=s.postData)||void 0===e?void 0:e.length,f=(null===l||void 0===l||null===(t=l.ThemeInfo)||void 0===t?void 0:t.branding)&&g&&m,b=!!(d&&1===(null===l||void 0===l||null===(a=l.ThemeStyle)||void 0===a?void 0:a.loadMoreStatus)&&E.includes(null===l||void 0===l?void 0:l.ThemeInfo.id)&&m&&g);return(0,c.jsxs)("div",{onTouchStart:this.handleTouchStart,className:`tb_theme_container${i.aD&&!i.Vn?" tb_wall_container":""} tb_wall_container`,style:{height:i.aD&&!i.Vn?`calc(100vh - ${h}px)`:null},ref:this.scrollRef,children:[f&&i.MH?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{wall:l,containerSize:o,brandingNetworks:r,wallId:l.ThemeInfo.wallId,themeID:null===l||void 0===l?void 0:l.ThemeInfo.id,user:l.User.userDatabaseType})}):null,(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(L,{...this.props,...this.state,loadBranding:this.loadBranding,handlePressStart:this.handlePressStart,handlePressEnd:this.handlePressEnd,clickToShowPopUp:this.onClickToShowPopup,onClickToCTA:this.onClickToCTA,onClickPopUpSlider:this.onClickPopUpSlider,onLoadPopUp:this.onLoadPopUp,...i.aD&&{heightUpdate:this.heightUpdate,key:g}})}),f&&!i.MH?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{wall:l,containerSize:o,brandingNetworks:r,wallId:l.ThemeInfo.wallId,themeID:null===l||void 0===l?void 0:l.ThemeInfo.id})}):null,b?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(p,{ThemeStyle:l.ThemeStyle,ThemeInfo:l.ThemeInfo,postData:s})}):null]})}}const Y=(0,l.Ng)((e=>({loaderData:e.loaderData,renderId:e.renderId})),(e=>({showPopUP:t=>e((0,d.Gd)(t)),nextData:(t,a,n,l,s,o,i)=>e((0,h.wF)(t,a,n,l,s,o,i)),closePopUP:()=>e((0,d.ng)())})))(B)},65281:(e,t,a)=>{a.d(t,{C9:()=>b,Cq:()=>f,HI:()=>m,Ph:()=>P,S2:()=>y,TW:()=>z,Ul:()=>u,Uy:()=>h,fF:()=>w,hZ:()=>S,hz:()=>g,iS:()=>p,p5:()=>M,pj:()=>F,sl:()=>j,um:()=>c,vG:()=>D,w:()=>x,wG:()=>v});var n=a(92908),l=a(78250),s=a(23499),o=a(40122);let i=[],r=!1;const d=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${n.$x}`,Productdomain:n.QR}),h=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},c=e=>{var t,a;return null===(t=(a={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")})[e])||void 0===t?void 0:t.call(a)},p=e=>{const t=new Date(1e3*e);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`},u=()=>Math.floor(1e4*Math.random()).toString().padStart(4,"0"),m=e=>{try{i.push(e)}catch(t){console.log(t)}},g=e=>e&&""!==e&&!e.includes("ui-avatars"),f=e=>{if(!e)return"0 Byte";const t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},b=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,w=e=>{const t=Date.now()-1e3*e;if(t<6e4)return"just now";const a=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{let{ms:a}=e;return t>=a})),n=Math.floor(t/a.ms);return`${n} ${a.label}${n>1?"s":""} ago`},x=e=>{try{return null!==e&&void 0!==e&&e.includes("http")?[...new Set(e.match(/(((ftp|https?):\/\/)[\w@:%_\+.~#?&//=]+)/g))].reduce(((e,t)=>e.replaceAll(t,`<a class="text_links_" role="link" target="_blank" href="${t}">${t}</a>`)),e):e}catch{return e}},S=()=>[`${l.om}`,"Website Widget"],v=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",y=["localhost","widget","wall_id="].every((e=>(0,n.vq)(e)))?"taggbox_main":n.MH||[`${n.Xg}.${n.IF}`,`${n.Xg}${n.t6}${n.IF}`,`${n.Xg}s.${n.IF}`].some((e=>(0,n.vq)(e)))?"tag_main__root":n.HY?"taggShopRoot":"taggbox_main",j=e=>{const t=Math.floor(Math.log10(e)/3)||0;return t?+(e/Math.pow(1e3,t)).toFixed(0)+["","K","M","B","T"][t]:e},P=e=>n.MH?e:atob(e),T=e=>{if(null===(a=e)||void 0===a?void 0:a.startsWith("#")){const t=parseInt(e.slice(1),16);return{r:t>>16&255,g:t>>8&255,b:255&t}}{var t;const a=(null===e||void 0===e||null===(t=e.match(/\d+/g))||void 0===t?void 0:t.map(Number))||[0,0,0];return{r:a[0],g:a[1],b:a[2]}}var a},I=e=>{const{r:t,g:a,b:n}=T(e);return Math.sqrt((255-t)**2+(255-a)**2+(255-n)**2)<=30},k=e=>{const{r:t,g:a,b:n}=T(e);return Math.sqrt((t-50)**2+(a-50)**2+(n-50)**2)<50},D=(e,t)=>{var a;null!==(a=e)&&void 0!==a&&a.startsWith("rgba")&&(e="#000000");const n=(e,t)=>t.some((t=>null===e||void 0===e?void 0:e.includes(t))),l=e=>n(e,["ffffff","255, 255, 255","#fff"]),s=e=>n(e,["000000","0, 0, 0","#000"]),[o,i]=[I(e),k(e)],[r,d]=[I(t),k(t)];return o&&r||l(e)&&l(t)?"#000000":i&&d||s(e)&&s(t)?"#ffffff":e},M=(e,t,a)=>e&&e.length>0?e.findIndex((e=>e.id===t)):a,F=()=>{try{const{wall:e}=s.A.getState().appData,{webId:t,wallId:a,ownerId:l}=e.ThemeInfo;r||(window.addEventListener("beforeunload",(()=>{if(0===i.length)return;const e=i.reduce(((e,t)=>e+t),0);e>0?fetch(n.KQ,{method:"POST",headers:d,body:JSON.stringify({action:1,model:null!==o.Ex&&void 0!==o.Ex&&o.Ex.includes("website")?"website":"wall",playCount:i.length,wall:n.HY?t:a,playTime:e,owner:l}),keepalive:!0}).finally((()=>(i=[],r=!1))):(i=[],r=!1)})),r=!0)}catch(e){console.error(e)}},z=e=>new Promise(((t,a)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>a(new Error(`Image loading error: ${e.message}`)),src:e})))}}]);
//# sourceMappingURL=551.5a620983.chunk.js.map