"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[56],{70056:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var n=a(9950),o=a(10300),l=a(80415),i=a(52867),s=a(66345),r=a(76506),d=a(93152),h=a(21850),c=a(44414);const p=n.lazy((()=>a.e(8947).then(a.bind(a,8947)))),u=n.lazy((()=>a.e(980).then(a.bind(a,10980)))),m=n.lazy((()=>Promise.all([a.e(8092),a.e(8740),a.e(4378),a.e(68),a.e(8731)]).then(a.bind(a,92367)))),w=n.lazy((()=>Promise.all([a.e(8092),a.e(4378),a.e(68),a.e(6256)]).then(a.bind(a,39232)))),g=n.lazy((()=>Promise.all([a.e(8092),a.e(8740),a.e(3382)]).then(a.bind(a,53382)))),v=n.lazy((()=>Promise.all([a.e(8092),a.e(8740),a.e(4061)]).then(a.bind(a,84061)))),f=n.lazy((()=>Promise.all([a.e(8740),a.e(4378),a.e(3763)]).then(a.bind(a,25816)))),b=n.lazy((()=>Promise.all([a.e(3556),a.e(4927)]).then(a.bind(a,54927)))),x=n.lazy((()=>Promise.all([a.e(8092),a.e(1588)]).then(a.bind(a,1588)))),S=n.lazy((()=>Promise.all([a.e(8092),a.e(5957),a.e(3131),a.e(9853)]).then(a.bind(a,13778)))),D=n.lazy((()=>Promise.all([a.e(8092),a.e(5957),a.e(3131),a.e(520)]).then(a.bind(a,17135)))),I=n.lazy((()=>Promise.all([a.e(8092),a.e(3556),a.e(566)]).then(a.bind(a,50566)))),T=n.lazy((()=>Promise.all([a.e(8092),a.e(8740),a.e(3556),a.e(2508)]).then(a.bind(a,2508)))),y=n.lazy((()=>Promise.all([a.e(8092),a.e(8740),a.e(3556),a.e(68),a.e(7541)]).then(a.bind(a,49769)))),j=n.lazy((()=>Promise.all([a.e(8740),a.e(3883)]).then(a.bind(a,73883)))),k=n.lazy((()=>Promise.all([a.e(8740),a.e(5957),a.e(4378),a.e(5104)]).then(a.bind(a,8568)))),P=s.HY?l.hX:l.Fp,F=s.HY?l.Fc:l.xX,M=n.memo((e=>{let{loadBranding:t,renderId:a,wall:o,reviewFilters:l,webFilters:i,postData:r,clickToShowPopUp:d,onClickToCTA:h,postSizeInPx:p,onClickPopUpSlider:u,parentID:P,keyRender:F,containerSize:M,heightUpdate:U}=e;const C=!r.hasMoreData[0]||0!=r.hasMoreData[0].hasMoreData&&(!r.hasMoreData[r.appendData.networkID]||r.hasMoreData[r.appendData.networkID].hasMoreData),{CardStyle:z,ThemeStyle:H,ProductSetting:L,ThemeInfo:B,SnapUp:_}=o,$={...r,loadBranding:t,heightUpdate:U,reviewFilters:l,webFilters:i,hasMoreData:C,clickToShowPopUp:d,onClickToCTA:h,onClickPopUpSlider:u,keyRender:F,containerSize:M,heightUpdate:U,postSizeInPx:p,parentID:P,renderId:a,CardStyle:z,ThemeStyle:H,ProductSetting:L,ThemeInfo:B,SnapUp:_};switch(null===B||void 0===B?void 0:B.id){case 3:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(w,{...$})});case 4:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(g,{...$})," "]});case 19:case 59:case 83:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(m,{...$})," "]});case 50:return s.HY?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(b,{...$})}):(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(f,{...$})});case 16:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(T,{...$})});case 55:case 81:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(I,{...$})});case 49:case 53:case 85:return(0,c.jsxs)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[" ",s.HY?(0,c.jsx)(x,{...$}):(0,c.jsx)(v,{...$})]});case 47:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(y,{...$})});case 6:case 61:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(S,{...$})});case 62:return s.HY?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(D,{...$})}):s.aD?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{})}):"";case 63:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(k,{...$})});case 64:return(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(j,{...$})});default:return(0,c.jsx)(c.Fragment,{})}}));class U extends n.PureComponent{constructor(e){super(e),this.loadBranding=()=>this.setState({isBranding:!0}),this.autoLoadEditorScrollData=e=>{var t;const{wall:a,postData:n,loaderData:o,hasMoreData:l}=this.props,i=a.ThemeStyle.totalPosts;let r=document.getElementsByClassName("wall-editor");if(1==a.ThemeStyle.autoScrollStatus&&P.includes(null===a||void 0===a||null===(t=a.ThemeInfo)||void 0===t?void 0:t.id)&&r.length>0&&l){let e=r[0];if(document.body.scrollHeight+e.scrollTop>=e.scrollHeight-10&&(!o||!o.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(s.HY?a.ThemeInfo.webId:a.ThemeInfo.wallId,e,i,n.appendData.networkID,n.appendData.after,n.appendData.heightEvent)}}},this.autoLoadScrollData=e=>{var t;const{wall:a,postData:n,loaderData:o,hasMoreData:l}=this.props,{ThemeInfo:i,ThemeStyle:r}=a,d=null===r||void 0===r?void 0:r.totalPosts,h=null===this||void 0===this||null===(t=this.containerRef)||void 0===t?void 0:t.current;if(h&&1===r.autoScrollStatus&&l){const e=h.getBoundingClientRect(),t=window.innerHeight;if(e.bottom-150<=t&&P.includes(null===i||void 0===i?void 0:i.id)&&(!o||!o.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(s.HY?i.webId:null===i||void 0===i?void 0:i.wallId,e,d,n.appendData.networkID,n.appendData.after,null===n||void 0===n?void 0:n.appendData.heightEvent)}}},this.onClickToShowPopup=(e,t)=>a=>{a.stopPropagation(),this.onLoadPopUp(e,t)},this.onClickPopUpSlider=(e,t)=>this.onLoadPopUp(e,t),this.onLoadPopUp=(e,t)=>{var a,n,o,l,d;const{wall:c,postData:p}=this.props,{viewOn:u,share:m}=c.ThemeStyle.language.text,w="tagembed"==(null===c||void 0===c||null===(a=c.User)||void 0===a?void 0:a.userDatabaseType),g=null===(n=c.ThemeInfo)||void 0===n?void 0:n.ownerId,v=s.HY?null===(o=c.ThemeInfo)||void 0===o?void 0:o.webId:null===(l=c.ThemeInfo)||void 0===l?void 0:l.wallId,f=null===(d=c.ThemeStyle)||void 0===d?void 0:d.modal;if(w||s.HY||!((0,i.qs)()&&(null===f||void 0===f||!f.mobile)||w&&null!==f&&void 0!==f&&f.mobile&&""!==t.link)){let a=p.postData.map((e=>p.completeDataObject[e])).filter((e=>!String(e.id).includes("free_add_"))),n=(0,r.p5)(a,t.id,e);if(2===(null===f||void 0===f?void 0:f.action)){if("undefined"==t.link||""==t.link)return!1;window.open(t.link,"_blank")}else 3===(null===f||void 0===f?void 0:f.action)?window.open(f.redirect,"_blank"):1===(null===f||void 0===f?void 0:f.action)&&this.props.showPopUP({type:"post",card:t,idArray:a,index:n,viewOnText:u,shareText:m,imgData:i.Y0,wall:c})}else{if("undefined"==t.link)return!1;window.open(t.link,"_blank")}const b={feed:t.feedId,post:t.referenceId?t.referenceId:t.id},x={action:2,wall:v,feed:t.feedId,post:t.referenceId?t.referenceId:t.id,type:3,owner:g};(0,h.hq)(s.Qy?x:{action:2,wall:v,...b,owner:g,type:3}),(0,h.x9)("Tagbox","popupclick_","popup",t.link)},this.loadPopUpWithTimer=()=>{const{currentIndex:e}=this.state,{postData:{postData:t,completeDataObject:a},wall:{ThemeRule:{timeForPopup:n}}}=this.props,o=0===n?5e3:1e3*n;let l=e+1;if(l>=t.length&&(l=0),!isNaN(l)&&t.length>0){const e=t.map((e=>a[e]));this.setState({currentIndex:l}),this.togglePopUpVisibility(l,e[l],o)}},this.togglePopUpVisibility=(e,t,a)=>{this.onLoadPopUp(e,t),setTimeout((()=>{this.props.closePopUP(),setTimeout((()=>{this.loadPopUpWithTimer()}),a)}),a)},this.onClickToCTA=e=>{var t,a;const{wall:n}=this.props;(0,h.hq)({action:2,wall:n.ThemeInfo.wallId,type:1,feed:e.feedId,post:null!==(t=e.referenceId)&&void 0!==t?t:e.id,owner:n.ThemeInfo.ownerId}),(0,h.x9)("Tagbox","ctaClick","cta",(null===(a=e.cta)||void 0===a?void 0:a.url)||"")},this.state={isLoaded:!1,currentIndex:-1,startPos:{x:0,y:0},isBranding:!1},this.containerRef=n.createRef()}componentDidMount(){var e;if(s.aD&&!s.yR&&!i.GF){const{wall:{ThemeRule:{timeForPopup:e},wall:t}}=this.props,a=0===e?5e3:1e3*e;1==t.ThemeStyle.modal.action&&setTimeout((()=>this.loadPopUpWithTimer()),a)}window.editor?null===(e=document.querySelector(".wall-editor"))||void 0===e||e.addEventListener("scroll",this.autoLoadEditorScrollData):window.addEventListener&&window.addEventListener("scroll",this.autoLoadScrollData),setTimeout((()=>{this.setState({isLoaded:!0})}),2e3),s.HY&&!s.I2&&(0,r.pj)()}render(){var e,t,a,o,l,i;const{wall:r,postData:d,containerSize:h,brandingNetworks:m}=this.props,{isLoaded:w,height:g,isBranding:v}=this.state,f=null===d||void 0===d||null===(e=d.postData)||void 0===e?void 0:e.length,b=(null===r||void 0===r||null===(t=r.ThemeInfo)||void 0===t?void 0:t.branding)&&f&&v,x=!!(w&&1===(null===r||void 0===r||null===(a=r.ThemeStyle)||void 0===a?void 0:a.loadMoreStatus)&&F.includes(null===r||void 0===r||null===(o=r.ThemeInfo)||void 0===o?void 0:o.id)&&v&&f);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"tb_theme_container "+(s.aD&&!s.Vn?"tb_wall_container":""),style:{height:s.aD&&!s.Vn?`calc(100vh - ${g}px)`:null},ref:this.containerRef,children:[b&&s.MH?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{wall:r,containerSize:h,brandingNetworks:m,wallId:r.ThemeInfo.wallId,themeID:null===r||void 0===r||null===(l=r.ThemeInfo)||void 0===l?void 0:l.id,user:r.User.userDatabaseType})}):null,(0,c.jsx)(M,{...this.props,...this.state,loadBranding:this.loadBranding,clickToShowPopUp:this.onClickToShowPopup,onClickToCTA:this.onClickToCTA,onClickPopUpSlider:this.onClickPopUpSlider,onLoadPopUp:this.onLoadPopUp,...s.aD&&{heightUpdate:this.heightUpdate,key:f}}),b&&!s.MH?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{wall:r,containerSize:h,brandingNetworks:m,wallId:r.ThemeInfo.wallId,themeID:null===r||void 0===r||null===(i=r.ThemeInfo)||void 0===i?void 0:i.id})}):null,x?(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(p,{ThemeStyle:r.ThemeStyle,ThemeInfo:r.ThemeInfo,postData:d})}):null]})})}}const C=(0,o.Ng)((e=>{var t,a,n;const{hasMoreData:o=[],appendData:l}=null===e||void 0===e||null===(t=e.appData)||void 0===t?void 0:t.postData,i=o[l.networkID],s=!1!==(null===(a=o[0])||void 0===a?void 0:a.hasMoreData)&&(null===(n=null===i||void 0===i?void 0:i.hasMoreData)||void 0===n||n);return{loaderData:e.loaderData,renderId:e.renderId,hasMoreData:s}}),(e=>({showPopUP:t=>e((0,d.Gd)(t)),nextData:(t,a,n,o,l,i,s)=>e((0,h.wF)(t,a,n,o,l,i,s)),closePopUP:()=>e((0,d.ng)())})))(U)},76506:(e,t,a)=>{a.d(t,{C9:()=>g,Cq:()=>w,HI:()=>u,Ph:()=>S,TW:()=>T,Uy:()=>h,fF:()=>v,hZ:()=>f,hz:()=>m,iS:()=>p,p5:()=>D,pj:()=>I,sl:()=>x,um:()=>c,wG:()=>b});var n=a(66345),o=a(80415),l=a(296),i=a(86961);let s=[],r=!1;const d=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${n.$x}`,Productdomain:n.QR}),h=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},c=e=>{var t,a;return null===(t=(a={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")})[e])||void 0===t?void 0:t.call(a)},p=e=>{const t=new Date(1e3*e);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`},u=e=>{try{s.push(e)}catch(t){console.log(t)}},m=e=>e&&""!==e&&!e.includes("ui-avatars"),w=e=>{if(!e)return"0 Byte";const t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},g=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,v=e=>{const t=Date.now()-1e3*e;if(t<6e4)return"just now";const a=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{let{ms:a}=e;return t>=a})),n=Math.floor(t/a.ms);return`${n} ${a.label}${n>1?"s":""} ago`},f=()=>[`${o.om}`,"Website Widget"],b=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",x=(["localhost","widget","wall_id="].every((e=>(0,n.vq)(e)))||(n.MH||[`${n.Xg}.${n.IF}`,`${n.Xg}${n.t6}${n.IF}`,`${n.Xg}s.${n.IF}`].some((e=>(0,n.vq)(e)))||n.HY),e=>{const t=Math.floor(Math.log10(e)/3)||0;return t?+(e/Math.pow(1e3,t)).toFixed(0)+["","K","M","B","T"][t]:e}),S=e=>n.MH?e:atob(e),D=(e,t,a)=>e&&e.length>0?e.findIndex((e=>e.id===t)):a,I=()=>{try{const{wall:e}=l.A.getState().appData,{webId:t,wallId:a,ownerId:o}=e.ThemeInfo;r||(window.addEventListener("beforeunload",(()=>{if(0===s.length)return;const e=s.reduce(((e,t)=>e+t),0);e>0?fetch(n.KQ,{method:"POST",headers:d,body:JSON.stringify({action:1,model:null!==i.Ex&&void 0!==i.Ex&&i.Ex.includes("website")?"website":"wall",playCount:s.length,wall:n.HY?t:a,playTime:e,owner:o}),keepalive:!0}).finally((()=>(s=[],r=!1))):(s=[],r=!1)})),r=!0)}catch(e){console.error(e)}},T=e=>new Promise(((t,a)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>a(new Error(`Image loading error: ${e.message}`)),src:e})))}}]);