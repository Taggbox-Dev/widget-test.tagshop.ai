"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[4056],{94056:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var o=n(88094),a=n(83546),i=n(8159),l=n(47043),s=n(40329),r=n(19066),d=n(30784),h=n(42682),c=n(15678);const p=o.lazy((()=>n.e(274).then(n.bind(n,70274)))),u=o.lazy((()=>n.e(7444).then(n.bind(n,77444)))),m=o.lazy((()=>Promise.all([n.e(4410),n.e(1112)]).then(n.bind(n,41112)))),w=o.lazy((()=>Promise.all([n.e(4410),n.e(8589)]).then(n.bind(n,68589)))),g=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(3487)]).then(n.bind(n,84273)))),f=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(249),n.e(2543)]).then(n.bind(n,81294)))),b=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(4410),n.e(9880)]).then(n.bind(n,9571)))),v=o.lazy((()=>Promise.all([n.e(1060),n.e(5698)]).then(n.bind(n,85698)))),S=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(2607)]).then(n.bind(n,14001)))),x=o.lazy((()=>Promise.all([n.e(8958),n.e(5689)]).then(n.bind(n,53339)))),T=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(8958),n.e(8413)]).then(n.bind(n,55731)))),I=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(1060),n.e(1149)]).then(n.bind(n,75731)))),y=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(1060),n.e(7273)]).then(n.bind(n,17631)))),j=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(5740),n.e(1060),n.e(249),n.e(9067)]).then(n.bind(n,94274)))),D=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(2219)]).then(n.bind(n,44986)))),k=o.lazy((()=>Promise.all([n.e(7524),n.e(4076),n.e(8958),n.e(4410),n.e(6983)]).then(n.bind(n,52722)))),P=s.HY?i.hX:i.Fp,F=s.HY?i.Fc:i.xX,M=o.memo((e=>{let{renderId:t,loadMoredata:n,wall:a,tuchMobile:i,reviewFilters:l,webFilters:r,postData:d,adjustWidth:h,clickToShowPopUp:p,cardNumber:u,onClickToCTA:P,postSizeInPx:F,onClickPopUpSlider:M,parentID:U,keyRender:_,containerSize:z,heightUpdate:C}=e;const H=!d.hasMoreData[0]||0!=d.hasMoreData[0].hasMoreData&&(!d.hasMoreData[d.appendData.networkID]||d.hasMoreData[d.appendData.networkID].hasMoreData),{CardStyle:W,ThemeStyle:L,ProductSetting:$,ThemeInfo:E,SnapUp:N}=a,R={...d,heightUpdate:C,loadMoredata:n,reviewFilters:l,webFilters:r,hasMoreData:H,adjustWidth:h,clickToShowPopUp:p,onClickToCTA:P,onClickPopUpSlider:M,keyRender:_,containerSize:z,heightUpdate:C,cardNumber:u,postSizeInPx:F,parentID:U,renderId:t,CardStyle:W,ThemeStyle:L,ProductSetting:$,ThemeInfo:E,SnapUp:N};switch(null===a||void 0===a?void 0:a.ThemeInfo.id){case 3:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(w,{...R})});case 4:return(0,c.jsxs)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(g,{...R})," "]});case 19:case 59:case 83:return h?(0,c.jsxs)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:[(0,c.jsx)(m,{...R})," "]}):null;case 50:return s.HY?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(v,{...R})}):(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(b,{...R})});case 16:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(y,{...R})});case 55:case 81:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(I,{...R})});case 49:case 53:case 85:return s.HY?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(S,{...R})}):(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(f,{...R})});case 47:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(j,{tuchMobile:i,...R})});case 6:case 61:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(x,{...R})});case 62:return s.HY?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(T,{...R})}):s.aD?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{})}):"";case 63:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(k,{...R})});case 64:return(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(D,{...R})});default:return(0,c.jsx)(c.Fragment,{})}}));class U extends o.PureComponent{constructor(){super(...arguments),this.state={windowWidth:window.innerWidth,windowHeight:window.innerHeight,adjustWidth:0,cardNumber:0,postSizeInPx:0,isLoaded:!1,currentIndex:-1,height:0,tuchMobile:!1},this.handleTouchStart=e=>this.setState({tuchMobile:!0}),this.heightUpdate=()=>{if(!s.Vn){const e=e=>(document.querySelector(e)||{}).clientHeight||0,t=e(".tb_wall_header__"),n=window.editor?e("#kt_header"):0,o=e(".ti_container");this.setState({height:t+n+o})}},this.autoLoadEditorScrollData=e=>{const{wall:t,postData:n,loaderData:o}=this.props,a=t.ThemeStyle.totalPosts;let i=document.getElementsByClassName("wall-editor");if(1==t.ThemeStyle.autoScrollStatus&&P.includes(null===t||void 0===t?void 0:t.ThemeInfo.id)&&i.length>0){let e=i[0];if(document.body.scrollHeight+e.scrollTop>=e.scrollHeight-10&&(!o||!o.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(t.ThemeInfo.wallId,e,a,n.appendData.networkID,n.appendData.after,n.appendData.heightEvent)}}},this.autoLoadScrollData=e=>{const{wall:t,postData:n,loaderData:o}=this.props,a=t.ThemeStyle.totalPosts,i=document.body,l=document.documentElement;if(1===t.ThemeStyle.autoScrollStatus&&P.includes(null===t||void 0===t?void 0:t.ThemeInfo.id)){const e=Math.max(i.scrollHeight,i.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight);if(window.innerHeight+window.pageYOffset>=parseInt(e)-parseInt(50)&&(!o||!o.isShowMoreLoading)){const e=Math.floor(Date.now()/1e3);this.props.nextData(t.ThemeInfo.wallId,e,a,n.appendData.networkID,n.appendData.after,n.appendData.heightEvent)}}},this.onResponsiveTheme=e=>{const{wall:t}=this.props;let{windowWidth:n}=this.state;n=2===e?n+165:n;let{adjustWidth:o,cardNumber:a}=(0,l.Jw)(n,t);o=(100/n*o).toFixed(2),this.setState({adjustWidth:o,cardNumber:a,postSizeInPx:(0,l.Jw)(n,t)},(()=>this.heightUpdate()))},this.onClickToShowPopup=(e,t)=>n=>{n.stopPropagation(),this.onLoadPopUp(e,t)},this.onClickPopUpSlider=(e,t)=>this.onLoadPopUp(e,t),this.onLoadPopUp=(e,t)=>{var n,o,a,i;const{wall:d,postData:c}=this.props,{viewOn:p,share:u}=d.ThemeStyle.language.text,m="tagembed"==(null===d||void 0===d||null===(n=d.User)||void 0===n?void 0:n.userDatabaseType),w=null===(o=d.ThemeInfo)||void 0===o?void 0:o.ownerId,g=null===(a=d.ThemeInfo)||void 0===a?void 0:a.wallId,f=null===(i=d.ThemeStyle)||void 0===i?void 0:i.modal;if(m||s.HY||!((0,l.qs)()&&(null===f||void 0===f||!f.mobile)||m&&null!==f&&void 0!==f&&f.mobile&&""!==t.link)){let n=c.postData.map((e=>c.completeDataObject[e])).filter((e=>!String(e.id).includes("free_add_"))),o=(0,r.p5)(n,t.id,e);if(2===(null===f||void 0===f?void 0:f.action)){if("undefined"==t.link||""==t.link)return!1;window.open(t.link,"_blank")}else 3===(null===f||void 0===f?void 0:f.action)?window.open(f.redirect,"_blank"):1===(null===f||void 0===f?void 0:f.action)&&this.props.showPopUP({type:"post",card:t,idArray:n,index:o,viewOnText:p,shareText:u,imgData:l.Y0,wall:d})}else{if("undefined"==t.link)return!1;window.open(t.link,"_blank")}const b={feed:t.feedId,post:t.referenceId?t.referenceId:t.id},v={action:2,wall:g,feed:t.feedId,post:t.referenceId?t.referenceId:t.id,type:3,owner:w};(0,h.hq)(s.Qy?v:{action:2,wall:g,...b,owner:w}),(0,h.x9)("Tagbox","popupclick_","popup",t.link)},this.loadPopUpWithTimer=()=>{const{currentIndex:e}=this.state,{postData:{postData:t,completeDataObject:n},wall:{ThemeRule:{timeForPopup:o}}}=this.props,a=0===o?5e3:1e3*o;let i=e+1;if(i>=t.length&&(i=0),!isNaN(i)&&t.length>0){const e=t.map((e=>n[e]));this.setState({currentIndex:i}),this.togglePopUpVisibility(i,e[i],a)}},this.togglePopUpVisibility=(e,t,n)=>{this.onLoadPopUp(e,t),setTimeout((()=>{this.props.closePopUP(),setTimeout((()=>{this.loadPopUpWithTimer()}),n)}),n)},this.onClickToCTA=e=>{const{wall:t}=this.props;(0,h.hq)({action:2,wall:t.ThemeInfo.wallId,type:1,feed:e.feedId,post:e.referenceId?e.referenceId:e.id,owner:t.ThemeInfo.ownerId}),(0,h.x9)("Tagbox","ctaClick","cta",e.cta&&e.cta.url?e.cta.url:"")}}UNSAFE_componentWillMount(){var e,t;this.setState({windowWidth:null!==(e=null===(t=document.getElementById(this.props.renderId))||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:window.innerWidth})}componentDidMount(){var e;const{renderId:t}=this.props.renderId;if(this.onResponsiveTheme(),s.aD&&!s.yR&&!l.GF){const{wall:{ThemeRule:{timeForPopup:e},wall:t}}=this.props,n=0===e?5e3:1e3*e;1==t.ThemeStyle.modal.action&&setTimeout((()=>this.loadPopUpWithTimer()),n)}window.addEventListener&&window.addEventListener("resize",(()=>{var e;this.setState({windowWidth:(null===(e=document.getElementById(t))||void 0===e?void 0:e.clientWidth)||window.innerWidth,windowHeight:window.innerHeight},this.onResponsiveTheme)})),window.editor?null===(e=document.querySelector(".wall-editor"))||void 0===e||e.addEventListener("scroll",this.autoLoadEditorScrollData):window.addEventListener&&window.addEventListener("scroll",this.autoLoadScrollData),setTimeout((()=>{this.setState({isLoaded:!0})}),2e3),s.HY&&!s.I2&&(0,r.pj)()}componentDidUpdate(e,t){}UNSAFE_componentWillReceiveProps(e){e!=this.props&&s.I2&&this.onResponsiveTheme()}render(){var e,t,n;const{wall:a,postData:i,containerSize:l,brandingNetworks:r}=this.props,d=a.ThemeInfo.branding&&(null===i||void 0===i||null===(e=i.completeData)||void 0===e?void 0:e.length)>0;window.onResponsiveTheme=this.onResponsiveTheme;const{isLoaded:h,height:m}=this.state,w=!(!h||1!==a.ThemeStyle.loadMoreStatus||!F.includes(null===a||void 0===a?void 0:a.ThemeInfo.id));return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{onTouchStart:this.handleTouchStart,className:"tb_theme_container "+(s.aD&&!s.Vn?"tb_wall_container":""),style:{height:s.aD&&!s.Vn?`calc(100vh - ${m}px)`:null},children:[d&&s.MH?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{containerSize:l,brandingNetworks:r,wallId:a.ThemeInfo.wallId,themeID:null===a||void 0===a?void 0:a.ThemeInfo.id,user:a.User.userDatabaseType})}):null,(0,c.jsx)(M,{...this.props,...this.state,clickToShowPopUp:this.onClickToShowPopup,onClickToCTA:this.onClickToCTA,onClickPopUpSlider:this.onClickPopUpSlider,onLoadPopUp:this.onLoadPopUp,...s.aD&&{heightUpdate:this.heightUpdate,key:null===i||void 0===i||null===(t=i.postData)||void 0===t?void 0:t.length}}),d&&!s.MH?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(u,{containerSize:l,brandingNetworks:r,wallId:a.ThemeInfo.wallId,themeID:null===a||void 0===a?void 0:a.ThemeInfo.id})}):null,w&&null!==i&&void 0!==i&&null!==(n=i.postData)&&void 0!==n&&n.length?(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(c.Fragment,{}),children:(0,c.jsx)(p,{ThemeStyle:a.ThemeStyle,ThemeInfo:a.ThemeInfo,postData:i})}):null]})})}}const _=(0,a.Ng)((e=>({loaderData:e.loaderData,renderId:e.renderId})),(e=>({showPopUP:t=>e((0,d.Gd)(t)),nextData:(t,n,o,a,i,l,s)=>e((0,h.wF)(t,n,o,a,i,l,s)),closePopUP:()=>e((0,d.ng)())})))(U)},19066:(e,t,n)=>{n.d(t,{C9:()=>g,Cq:()=>w,HI:()=>u,Ph:()=>I,S2:()=>x,TW:()=>M,Ul:()=>p,Uy:()=>d,fF:()=>f,hZ:()=>v,hz:()=>m,iS:()=>c,p5:()=>P,pj:()=>F,sl:()=>T,um:()=>h,vG:()=>k,w:()=>b,wG:()=>S});var o=n(40329),a=n(8159),i=n(56364);let l=[],s=!1;const r=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${o.$x}`,Productdomain:o.QR}),d=e=>{var t;return null===(t=document.getElementById("tb_onsite_btn_id"))||void 0===t?void 0:t.classList.toggle("tb_onsite_btn_disabled",1===e)},h=e=>{var t,n;return null===(t=(n={1:()=>window.onShowDemoPost(1),2:()=>window.hendleFeeds("addFeeds"),3:()=>window.hendleFeeds("manageFeeds")})[e])||void 0===t?void 0:t.call(n)},c=e=>{const t=new Date(1e3*e);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`},p=()=>Math.floor(1e4*Math.random()).toString().padStart(4,"0"),u=e=>{try{l.push(e)}catch(t){console.log(t)}},m=e=>e&&""!==e&&!e.includes("ui-avatars"),w=e=>{if(!e)return"0 Byte";const t=Math.floor(Math.log(e)/Math.log(1024));return{size:Math.round(e/Math.pow(1024,t),2),sizeText:["Bytes","KB","MB","GB","TB"][t]}},g=e=>e.startsWith("http://")||e.startsWith("https://")?e:"https://"+e,f=e=>{const t=Date.now()-1e3*e;if(t<6e4)return"just now";const n=[{label:"year",ms:31536e6},{label:"month",ms:2592e6},{label:"week",ms:6048e5},{label:"day",ms:864e5},{label:"hour",ms:36e5},{label:"minute",ms:6e4}].find((e=>{let{ms:n}=e;return t>=n})),o=Math.floor(t/n.ms);return`${o} ${n.label}${o>1?"s":""} ago`},b=e=>{try{return null!==e&&void 0!==e&&e.includes("http")?[...new Set(e.match(/(((ftp|https?):\/\/)[\w@:%_\+.~#?&//=]+)/g))].reduce(((e,t)=>e.replaceAll(t,`<a class="text_links_" role="link" target="_blank" href="${t}">${t}</a>`)),e):e}catch{return e}},v=()=>[`${a.om}`,"Website Widget"],S=e=>e&&String(e)?unescape(e).split("/").pop().split("/").slice(-1).join().split(".").shift():"",x=["localhost","widget","wall_id="].every((e=>(0,o.vq)(e)))?"taggbox_main":o.MH||[`${o.Xg}.${o.IF}`,`${o.Xg}${o.t6}${o.IF}`,`${o.Xg}s.${o.IF}`].some((e=>(0,o.vq)(e)))?"tag_main__root":o.HY?"taggShopRoot":"taggbox_main",T=e=>{const t=Math.floor(Math.log10(e)/3)||0;return t?+(e/Math.pow(1e3,t)).toFixed(0)+["","K","M","B","T"][t]:e},I=e=>o.MH?e:atob(e),y=e=>{if(null===(n=e)||void 0===n?void 0:n.startsWith("#")){const t=parseInt(e.slice(1),16);return{r:t>>16&255,g:t>>8&255,b:255&t}}{var t;const n=(null===e||void 0===e||null===(t=e.match(/\d+/g))||void 0===t?void 0:t.map(Number))||[0,0,0];return{r:n[0],g:n[1],b:n[2]}}var n},j=e=>{const{r:t,g:n,b:o}=y(e);return Math.sqrt((255-t)**2+(255-n)**2+(255-o)**2)<=30},D=e=>{const{r:t,g:n,b:o}=y(e);return Math.sqrt((t-50)**2+(n-50)**2+(o-50)**2)<50},k=(e,t)=>{var n;null!==(n=e)&&void 0!==n&&n.startsWith("rgba")&&(e="#000000");const o=(e,t)=>t.some((t=>null===e||void 0===e?void 0:e.includes(t))),a=e=>o(e,["ffffff","255, 255, 255","#fff"]),i=e=>o(e,["000000","0, 0, 0","#000"]),[l,s]=[j(e),D(e)],[r,d]=[j(t),D(t)];return l&&r||a(e)&&a(t)?"#000000":s&&d||i(e)&&i(t)?"#ffffff":e},P=(e,t,n)=>e&&e.length>0?e.findIndex((e=>e.id===t)):n,F=()=>{try{const{wall:e}=i.A.getState().appData;s||(window.addEventListener("beforeunload",(()=>{if(0===l.length)return;const t=l.reduce(((e,t)=>e+t),0);t>0?fetch(o.KQ,{method:"POST",headers:r,body:JSON.stringify({playCount:l.length,id:e.ThemeInfo.wallId,playTime:t,owner:e.ThemeInfo.ownerId}),keepalive:!0}).finally((()=>(l=[],s=!1))):(l=[],s=!1)})),s=!0)}catch(e){console.error(e)}},M=e=>new Promise(((t,n)=>Object.assign(new Image,{onload:function(){t({width:this.naturalWidth,height:this.naturalHeight})},onerror:e=>n(new Error(`Image loading error: ${e.message}`)),src:e})))}}]);