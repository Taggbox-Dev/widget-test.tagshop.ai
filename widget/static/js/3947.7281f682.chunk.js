(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[3947,7775],{75495:()=>{},82276:()=>{},23314:()=>{},44238:(e,t,i)=>{"use strict";i.d(t,{bs:()=>r});var s=i(31530),o=i(7665),l=i(83884),a=i(10753),n=i(89620);let d=[];const r=e=>{e.persist();const t=e.target,{network:i,itemId:s,themeId:o}=t.dataset;if(1!=i||[3,4,16,47,50,55,60].includes(o))d.includes(e)||d.push(e);else{const e=document.querySelector(`.tb_media-${s}`);e&&(e.style.display="none")}1===d.length&&c()},c=async()=>{var e;const{postData:t,wall:i}=o.A.getState().appData;if(!i||!Object.keys(i).length||!d.length)return;const{User:r,Wall:h}=i,p=null===r||void 0===r?void 0:r.id,m=(l.HY,null===h||void 0===h?void 0:h.id),v=null===(e=d[0])||void 0===e?void 0:e.target,{filterId:b,network:g,itemId:_,load:y}=v.dataset,f=document.querySelector(`img[data-item-id="${_}"]`),w=null!==t&&void 0!==t&&t.completeDataObject?Object.values(t.completeDataObject).filter((e=>e.id===_)):[];if(null!==w&&void 0!==w&&w.length){var x;const e=await(async e=>["taggbox.com","tagbox.com","tagembed.com","socialwalls.com"].some((t=>e.includes(t)))||await fetch(e).then((e=>e.ok)).catch((()=>!1)))(null===(x=w[0])||void 0===x?void 0:x.postFileNew);if(!e&&f){if([2,18,3,28].includes(+g)&&"0"===y&&"34"!==b&&!v.src.includes("cloud.taggbox.com")){const e=((e,t,i)=>{var s,o,l,a,n;const{UserPlan:d,Wall:r}=t;return{table_name:null===d||void 0===d?void 0:d.db_table,...e,...null!==i&&void 0!==i&&i.length?{feedId:null===(s=i[0])||void 0===s?void 0:s.feedId,type:null===(o=i[0])||void 0===o?void 0:o.type,link:null===(l=i[0])||void 0===l?void 0:l.link,postFile:null===(a=i[0])||void 0===a?void 0:a.postFile,mediaFile:null===(n=i[0])||void 0===n?void 0:n.mediaFile}:{},url:null===r||void 0===r?void 0:r.url}})({wallId:m,postId:_,ownerId:p},i,w);try{const{data:t}=await(new n.A).post(l.t5,e,{headers:a.ML}),i=l.HY||l.MH?"":`https://images.${l.QR}/`;v.src="18"===g?`${i}${t.media}`:t.media}catch{v.src=s.gX}finally{u(v)}}else v.src=s.gX,u(v);d.shift(),c()}else{const e=`${s.th}/media/images/no-image.svg`;v.src=e,v.srcset=e,u(v),d.shift()}}},u=e=>e.setAttribute("data-load","1")},82803:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var s=i(82483),o=i(12251),l=i(99998),a=i(76467),n=i(99009),d=i(29269),r=i(56723);const c=(0,s.memo)((e=>{let{item:t}=e;const i=t.discount>0&&t.discount!==t.price,s=t.discount>0?t.discount:t.price;return(0,r.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,r.jsx)("div",{className:"tb_p_tooltip_title",children:t.title}),i&&(0,r.jsxs)("div",{className:"tb_p_tooltip_price tb_price_disabled",children:[t.currency,t.price]}),(t.price>0||t.discount>0)&&(0,r.jsxs)("div",{className:"tb_p_tooltip_price",children:[t.currency,s]})]})})),u=e=>{let{products:t,appData:i,Post:o}=e;const[u,h]=(0,s.useState)(null),p=(0,s.useMemo)((()=>{var e,t;return(null===i||void 0===i||null===(e=i.wall)||void 0===e||null===(t=e.ProductSetting)||void 0===t?void 0:t.Hotspot)||{}}),[i]),m=(0,s.useCallback)((e=>{null!==i&&void 0!==i&&i.wall&&(0,d.hq)({})}),[i,o]),v=(0,s.useCallback)(((e,t)=>{e.stopPropagation(),m(t),window.open(t.url,"_blank")}),[m]);return null!==p&&void 0!==p&&p.status?t.map(((e,t)=>{const i=`hotspot-${e.id}-${(0,n.Ul)()}`,s=u===t;return(0,r.jsxs)("div",{id:i,className:"tb_hotspot_dot"+(s?" tb_hotspot_active_":""),role:"button",style:{top:e.hotspot.top,left:e.hotspot.left},onMouseEnter:()=>h(t),onMouseLeave:()=>h(null),onClick:t=>v(t,e),"data-tooltip-offset":7,children:[(0,r.jsx)("div",{className:"tb_hotspot__ "+(0===p.type?"tb_hotspot_ani__":""),children:t+1}),(0,l.createPortal)((0,r.jsx)(a.m_,{className:"tb_pro_tooltip",anchorSelect:`#${i}`,clickable:!0,children:(0,r.jsx)(c,{item:e})}),document.body)]},`${e.id}-${t}`)})):null},h=(0,s.memo)(u),p=(0,o.Ng)((e=>({appData:e.appData})))(h)},7775:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var s=i(82483),o=i(99009),l=i(31530),a=i(21645),n=i(44238),d=i(82803),r=i(56723);class c extends s.PureComponent{constructor(e){var t,i;super(e),this.updateMediaDimensions=()=>{if(this.mediaRef.current){const{offsetHeight:e,offsetWidth:t}=this.mediaRef.current;this.setState({currentHeight:e,currentWidth:t})}},this.mediaSizeCalc=async()=>{const{Post:e,mediaOnly:t}=this.props,i=t||e.media;if((null===i||void 0===i||!i.height)&&(null===i||void 0===i||!i.width))try{var s;const{width:e,height:t}=await(0,o.TW)(null===i||void 0===i||null===(s=i.image)||void 0===s?void 0:s.small);this._isMounted&&this.setState({height:t,width:e})}catch(l){this._isMounted&&this.setState({height:300,width:300})}};const{mediaOnly:l,Post:a}=e;this.state={isVisible:!this.props.observer,height:(null===l||void 0===l?void 0:l.height)||(null===a||void 0===a||null===(t=a.media)||void 0===t?void 0:t.height)||0,width:(null===l||void 0===l?void 0:l.width)||(null===a||void 0===a||null===(i=a.media)||void 0===i?void 0:i.width)||0,currentHeight:0,currentWidth:0},this.mediaRef=s.createRef(),this.observer=null}componentDidMount(){this._isMounted=!0,requestAnimationFrame((()=>{this.updateMediaDimensions(),this.mediaSizeCalc()})),this.observer=new IntersectionObserver((e=>{let[t]=e;t.isIntersecting&&(this.setState({isVisible:!0}),this.observer.disconnect())}),{threshold:.01}),this.mediaRef.current&&this.observer.observe(this.mediaRef.current)}componentWillUnmount(){this._isMounted=!1,this.observer&&this.observer.disconnect()}render(){var e,t,i,s;const{ImageClass:o,Post:c,hotspot:u,size:h,blurBG:p,ProductSetting:m,mediaOnly:v}=this.props,{id:b,link:g,products:_}=c,y=v||(null===c||void 0===c?void 0:c.media),{isVisible:f,height:w,width:x,currentWidth:S,currentHeight:P}=this.state,j=h||100*w/x,k={paddingBottom:1===j?null:`${j}%`},C={backgroundImage:f?`url(${null===y||void 0===y||null===(e=y.image)||void 0===e?void 0:e.small})`:null},I=x>w?"100%":x/w*100+"%",M=x>w?w/x*100+"%":"100%",R=c.isProduct&&u,D={width:R&&h?I:null,height:R&&h?M:null};return(0,r.jsxs)("div",{className:`${o}_wrap_`,style:k,ref:this.mediaRef,children:[R&&p?(0,r.jsx)("div",{className:"tb_blur_bg_",style:C}):null,(0,r.jsxs)("div",{className:`${o}_wrap_in`,style:D,children:[R?(0,r.jsx)(d.A,{products:_,ProductSetting:m,hotspot:c.hotspot,dataPost:c}):null,f?(0,r.jsx)("img",{className:`${o} tb_media-${b}`,src:null===y||void 0===y||null===(t=y.image)||void 0===t?void 0:t.small,srcSet:`${null===y||void 0===y||null===(i=y.image)||void 0===i?void 0:i.small} 1x, ${null===y||void 0===y||null===(s=y.image)||void 0===s?void 0:s.large} 2x`,sizes:`${S}px`,loading:f?"eager":"lazy",decoding:"async",fetchPriority:f?"high":"low","data-id":b,height:P,width:S,"data-height":w,"data-width":x,"data-link":g,onLoad:this.onLoad,onError:e=>{e.target.src=`${l.th}/media/error/no-image.svg`,e.target.srcset=`${l.th}/media/error/no-image.svg`,(0,n.bs)(e)},alt:null===y||void 0===y?void 0:y.title,title:(0,a.Ay)(null===y||void 0===y?void 0:y.title)},b):null]})]})}}},33689:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var s=i(82483),o=i(48819),l=i.n(o),a=i(83884),n=i(21645),d=i(99009),r=i(56723);class c extends s.Component{constructor(e){super(e),this.mediaSizeCalc=async()=>{const{media:e}=this.props.Post;if((null===e||void 0===e||!e.height)&&(null===e||void 0===e||!e.width))try{var t;const{width:i,height:s}=await(0,d.TW)(null===e||void 0===e||null===(t=e.image)||void 0===t?void 0:t.small,{signal:this.abortController.signal});this._isMounted&&this.setState({calcHeight:s,calcWidth:i})}catch(i){this._isMounted&&"AbortError"!==i.name&&this.setState({calcHeight:300,calcWidth:300})}},this.setVideoLoaded=e=>{this._isMounted&&this.setState({videoLoaded:e})},this.state={loadError:!1,videoLoaded:!1,isVisible:!this.props.observer,calcHeight:0,calcWidth:0},this.mediaRef=s.createRef(),this.observer=null,this._isMounted=!1,this.abortController=new AbortController}componentDidMount(){this._isMounted=!0,this.mediaSizeCalc();try{this.observer=new IntersectionObserver((e=>{let[t]=e;this._isMounted&&this.setState({isVisible:!0})}),{threshold:.1}),this.mediaRef.current&&this.observer.observe(this.mediaRef.current)}catch(e){this._isMounted&&this.setState({isVisible:!0})}}componentWillUnmount(){this._isMounted=!1,this.observer&&this.observer.disconnect(),this.observer&&this.mediaRef.current&&this.observer.unobserve(this.mediaRef.current),this.abortController.abort()}render(){var e,t,i,s;const{VideoClass:o,Post:d,controls:c,autoPlay:u,handleVideoEnded:h,muted:p,intervalTime:m,size:v}=this.props,{isVisible:b,calcHeight:g,calcWidth:_}=this.state,{media:y,id:f,link:w,networkId:x}=d,S=1===v,P=null!==y&&void 0!==y&&y.height?null===y||void 0===y?void 0:y.height:g,j=null!==y&&void 0!==y&&y.width?null===y||void 0===y?void 0:y.width:_,k={paddingBottom:`${S?null:v||100*P/j}%`};return(0,r.jsx)("div",{className:`${o}_wrap_`,style:k,ref:this.mediaRef,children:(0,r.jsx)(l(),{className:`${o} tb_media-${f}`,url:b?null===y||void 0===y||null===(e=y.video)||void 0===e?void 0:e.full:null===y||void 0===y||null===(t=y.image)||void 0===t?void 0:t.small,"data-height":P,"data-width":j,"data-type":"video","data-network":x,"data-link":w,"data-item-id":f,"data-load":0,config:{facebook:{appId:"117029975354072",attributes:{"data-width":j,"data-height":P,poster:null===y||void 0===y||null===(i=y.image)||void 0===i?void 0:i.small}},file:{attributes:{preload:"metadata",poster:null===y||void 0===y||null===(s=y.image)||void 0===s?void 0:s.small}}},loop:!(a.aD&&!a.HY&&null!==d&&void 0!==d&&d.loopStop)&&u,onError:e=>{S&&h&&setTimeout((()=>{this._isMounted&&h&&h()}),1e3*m),this.setVideoLoaded(!1)},autoPlay:b&&u,muted:p,volume:u?1:0,playsinline:!0,onReady:()=>this.setVideoLoaded(!a.HY),playing:b&&u,controls:c||!1,onEnded:h,title:(0,n.Ay)(null===y||void 0===y?void 0:y.title)})})}}const u=(0,s.memo)(c)},74025:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var s=i(99009),o=i(56723);const l=e=>{let{count:t}=e;return(0,o.jsxs)("div",{className:"tb_r_view",children:[(0,o.jsx)("div",{className:"tb__icon tb-eye",children:(0,o.jsx)("div",{})}),(0,s.sl)(t)]})}},75616:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var s=i(82483),o=i(12251),l=i(88620),a=i(4933),n=(i(46262),i(75495),i(82276),i(23314),i(83884)),d=i(24366),r=i(29269),c=i(7775),u=i(33689),h=i(56723);const p=e=>{let{Post:t,ThemeStyle:i,isVisible:s,index:o}=e;const l=!(![3,5].includes(t.type)||!s||1!=i.autoPlay&&n.HY);return(0,h.jsx)("div",{className:"tb_rtp_media_wrap",children:l?(0,h.jsx)(u.A,{VideoClass:"tb_rtp_video",Post:t,size:178,isCover:!0,muted:!0,autoPlay:!0,index:o}):(0,h.jsx)(c.default,{ImageClass:"tb_rtp_image",Post:t,size:178,index:o})})};var m=i(74025);const v=s.lazy((()=>i.e(906).then(i.bind(i,30906)))),b=s.lazy((()=>i.e(1663).then(i.bind(i,81663))));class g extends s.PureComponent{constructor(e){super(e),this.mediaHeight=s.createRef()}componentDidMount(){const{Post:e,itemIndex:t,onClickPopUpSlider:i}=this.props;(n.Qy||n.HY)&&(0,d._7)(this.mediaHeight),e.isPopUp&&i(t,e)}render(){const{itemIndex:e,isVisible:t,clickToShowPopUp:i,ThemeStyle:o,CardStyle:l,Post:a,ProductSetting:d,sliderHeight:r,index:c}=this.props,{style:u}=l,g={backgroundColor:u.background,minHeight:r},_=!![3,5].includes(a.type);return(0,h.jsx)("div",{"data-id":a.id,id:`tb_rt_id-${a.id}`,className:"tb_rtp_post_wrapper",ref:this.mediaHeight,style:{padding:u.padding/2},"tb-product":a.isShopIcon?1:a.isHotspot?2:0,"area-label":a.content.text,role:"article",children:(0,h.jsxs)("div",{className:"tb_rtp_post_in tb_icon_animate "+(n.HY?"":"tb_rtp_post_in_animate"),style:g,onClick:i(e,a),role:"button","aria-label":"Popup",tabIndex:0,children:[(0,h.jsxs)("div",{className:"tb_rtp_post_media_wrapp",children:[_&&1==l.viewCountStatus&&(null===a||void 0===a?void 0:a.count.views)>0?(0,h.jsx)(m.A,{count:null===a||void 0===a?void 0:a.count.views}):null,(0,h.jsx)(p,{Post:a,CardStyle:l,ThemeStyle:o,isVisible:t,index:c}),n.HY?null:(0,h.jsx)("div",{className:"tb_rtp_play_ico",children:(0,h.jsx)("div",{className:"tb__icon tb-play",children:(0,h.jsx)("div",{})})})]}),a.isProduct?(0,h.jsxs)(s.Suspense,{fallback:(0,h.jsx)(h.Fragment,{}),children:[(0,h.jsx)(v,{Post:a,ProductSetting:d},`product_slide${a.id}`)," "]}):(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)(h.Fragment,{}),children:(0,h.jsx)(b,{Post:a,CardStyle:l,ThemeStyle:o,ProductSetting:d})})]})})}}const _=(0,s.memo)((e=>{const{postData:t,completeDataObject:i,clickToShowPopUp:o,hasMoreData:r,parentID:c,keyRender:u,containerSize:p,onClickPopUpSlider:m,CardStyle:v,ThemeStyle:b,ProductSetting:_,ThemeInfo:y,appendData:f,preRender:w,loaderData:x,nextData:S,loadMoredata:P}=e,j=(0,s.useRef)(null),k=(0,s.useRef)({}),[C,I]=(0,s.useState)(!1),M=(0,s.useCallback)((e=>{e.progress>.8&&r&&!x.isShowMoreLoading&&S(n.HY?y.webId:y.wallId,Math.floor(Date.now()/1e3),b.totalPosts,f.networkID,f.after,w,f.heightEvent)}),[r,x.isShowMoreLoading,S,y,b.totalPosts,f,w]),R=e=>{I(!0),setTimeout((()=>P()),1e3*e)};(0,s.useEffect)((()=>{const e=document.querySelectorAll(".splide__slide");if(e&&e.forEach((e=>{e.removeAttribute("aria-hidden"),e.removeAttribute("role")})),t&&1===t.length){const e=document.querySelector(".tb_rtp_arrow_left__"),t=document.querySelector(".tb_rtp_arrow_right__");e&&t&&(e.style.display="none",t.style.display="none")}}),[t]);const D=c,H=b.column.desktop,V=b.column.mobile,$=b.slide.autoSlide,N=b.slide.slideDuration,T=1===v.content.trimcontent,A=Math.floor(p.width/240);let O=1===A?2:A-.4,W=t;O>t.length&&(O=t.length);const E=0===H?O:parseInt(H)-.4;return E&&Math.round(E)<=t.length&&(W=Array(2).fill(t).flat()),(0,h.jsx)(h.Fragment,{children:c&&(0,h.jsx)("div",{className:"tb_rtp_post_container",ref:j,children:(0,h.jsx)(l.RC,{ref:e=>k.current[D]=e,style:{width:"100%",height:"100%"},onScroll:e=>{M(e),C||R(3)},onTouchMove:e=>{M(e),C||R(0)},onAutoplay:e=>{M(e),C||R(3)},autoHeight:!0,speed:700,edgeSwipeDetection:!0,slidesPerView:E,touchRatio:2,cssMode:(0,d.qs)(),passiveListeners:!0,height:"100%",freeMode:{enabled:!0,sticky:!1,momentumBounceRatio:2,momentumVelocityRatio:3},autoplay:!!n.HY&&{delay:1===$?1e3*N:99e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!r,slideFullyVisibleClass:"tb-swiper-slide-fully-visible",breakpoints:{0:{slidesPerView:V?parseInt(V)-.4:O},480:{slidesPerView:V?parseInt(V)-.4:O},575:{slidesPerView:V?parseInt(V)-.4:O},767:{slidesPerView:E},1024:{slidesPerView:E},1400:{slidesPerView:E},1600:{slidesPerView:E}},mousewheel:{forceToAxis:!0,sensitivity:2},watchSlidesProgress:!0,modules:[a.Ij,a.FJ,a.U1],className:"tb_rtp_post_slider "+(T?"tb_rtp_fixed_height":""),children:W&&W.length>0&&W.map(((e,t)=>{const s=i[e];return n.HY||[3,5].includes(s.type)?(0,h.jsx)(l.qr,{style:{margin:0,padding:0},p_id:c,className:`tb_${s.id}`,children:e=>{let{isVisible:i}=e;return(0,h.jsx)(g,{isVisible:i,Post:s,index:t,CardStyle:v,ThemeStyle:b,ProductSetting:_,ThemeInfo:y,clickToShowPopUp:o,onClickPopUpSlider:m})}},e.id):null}))},u)})})})),y={nextData:r.wF},f=(0,o.Ng)((e=>({loaderData:e.loaderData})),y)(_)},59993:(e,t,i)=>{"use strict";var s=i(85730);function o(){}function l(){}l.resetWarningCache=o,e.exports=function(){function e(e,t,i,o,l,a){if(a!==s){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:o};return i.PropTypes=i,i}},16405:(e,t,i)=>{e.exports=i(59993)()},85730:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},95098:()=>{}}]);
//# sourceMappingURL=3947.7281f682.chunk.js.map